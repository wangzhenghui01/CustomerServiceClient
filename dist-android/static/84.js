webpackJsonp([84],{395:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(5),d=r(i),o=a(4),n=r(o),l=a(2),s=r(l),p=a(3),c=a(76),h=r(c);s.default.mark(function t(e,a){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.f_actualfee_type=a.f_actualfee_type[0],a.f_bill_type=a.f_bill_type[0],t.next=4,e.$resetpost("rs/logic/saveentity",{data:{tablename:"t_apply",parameters:a}});case 4:delete a.id,e.$resetpost("rs/logic/saveentity",{data:{tablename:"t_record",parameters:a}}).then(function(){e.reset()});case 6:case"end":return t.stop()}},t,this)});e.default={components:{InputAndSelect:h.default},title:"报装收费",data:function(){return{model:{f_payfee_operator:"",f_payfee_department:"",f_filiale:"",f_payfee_date:"",rows:[]},detailModel:{rows:[]},isShowdetail:!1}},props:["infee"],ready:function(){this.load(),this.model.f_payfee_operator=this.$login.f.name,this.model.f_payfee_department=this.$login.f.f_parentname,this.model.f_filiale=this.$login.f.f_fengongsi,this.model.f_payfee_date=this.$login.toStandardDateString()},methods:{showdetail:function(){function t(t,a){return e.apply(this,arguments)}var e=(0,n.default)(s.default.mark(function t(e,a){var r,i,o,n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),this.isShowdetail=!0,r=new p.HttpResetClass,i={tablename:"t_receipt_detail",condition:"f_sheet_id = '"+e+"'"},console.log("即将获取材料明细记录数据"),t.next=7,r.load("POST","rs/sql/singleTable",{data:i},{resolveMsg:null,rejectMsg:"获取材料明细记录数据失败"});case 7:for(o=t.sent,console.log("获取材料明细记录数据结果=>"+(0,d.default)(o.data)),n=0;n<o.data.length;n++)o.data[n].f_batch_importdate=o.data[n].f_batch_importdate.substring(0,11);this.detailModel.rows=o.data;case 11:case"end":return t.stop()}},t,this)}));return t}(),goback:function(){this.$dispatch("hiddenbtn"),this.showview=!1},reset:function(){this.$dispatch("close"),this.$dispatch("selfsearch")},load:function(){function t(){return e.apply(this,arguments)}var e=(0,n.default)(s.default.mark(function t(){var e,a,r,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new p.HttpResetClass,a={tablename:"t_receipt_sheet",condition:"f_apply_num = '"+this.infee.f_apply_num+"'"},console.log("即将获取材料批次记录数据"),t.next=5,e.load("POST","rs/sql/singleTable",{data:a},{resolveMsg:null,rejectMsg:"获取材料批次记录数据失败"});case 5:for(r=t.sent,console.log("获取材料批次记录数据响应结果=>"+(0,d.default)(r.data)),i=0;i<r.data.length;i++)r.data[i].f_batch_importdate=r.data[i].f_batch_importdate.substring(0,11);this.model.rows=r.data;case 9:case"end":return t.stop()}},t,this)}));return t}()}}},822:function(t,e){t.exports=' <div class="col-sm-12 auto select-overspread"> <div class="auto select-overspread"> <div class="panel panel-info"> <div class="panel-heading auto"> <h3 class=panel-title>材料记录展示</h3> </div> </div> </div> <div class="col-sm-12 span recordTable" style="margin-top: 10px;min-height: 80px;max-height:200px"> <partial-view v-ref:single-load> <data-grid :model=model v-ref:grid> <template partial=head> <tr> <th>序号</th> <th>材料批次id</th> <th>分公司</th> <th>操作部门</th> <th>领料批次操作人</th> <th>导入时间</th> </tr> </template> <template partial=body> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{$index+1}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_batch_id}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_filiale}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_parentname}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_sheet_operator}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_batch_importdate}}</td> </template> </data-grid> </partial-view> </div> <div class="col-sm-12 span recordTable" style="margin-top: 10px;min-height: 100px;max-height:300px" v-if=isShowdetail> <p>材料清单 <button type=button class=close @click="isShowdetail=false" aria-hidden=true>&times;</button> </p> <partial-view v-ref:single-load> <data-grid :model=detailModel v-ref:batchgrid> <template partial=head> <tr> <th>序号</th> <th>领取数量</th> <th>材料类型</th> <th>材料编码</th> <th>材料名称</th> <th>材料规格</th> <th>材料单位</th> <th>分公司</th> <th>操作部门</th> <th>领料明细操作人</th> <th>导入时间</th> </tr> </template> <template partial=body style="min-height: 100px;max-height:200px"> <td>{{$index+1}}</td> <td>{{row.f_receipt_num}}</td> <td>{{row.f_batch_type}}</td> <td>{{row.f_batch_code}}</td> <td>{{row.f_batch_name}}</td> <td>{{row.f_batch_norms}}</td> <td>{{row.f_batch_company}}</td> <td>{{row.f_filiale}}</td> <td>{{row.f_parentname}}</td> <td>{{row.f_detail_operator}}</td> <td>{{row.f_batch_importdate}}</td> </template> </data-grid> </partial-view> </div> </div> '},1027:function(t,e,a){var r,i,d={};r=a(395),i=a(822),t.exports=r||{},t.exports.__esModule&&(t.exports=t.exports.default);var o="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(d).forEach(function(t){var e=d[t];o.computed[t]=function(){return e}})}});
//# sourceMappingURL=84.js.map