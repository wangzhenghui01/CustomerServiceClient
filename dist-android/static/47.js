webpackJsonp([47],{75:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(81),s=a(i),n=r(38),o=a(n),l={params:{},singleValues:{},gasstyles:{},gasbrands:[],price:[],adjustables:[],getParam:function(e){return this.params[e]},getSingleValue:function(e){return this.singleValues[e]},getGasstyle:function(e){return this.gasbrands.key},getGasbrand:function(){return this.gasbrands},getAdjustable:function(e){var t=[];e?this.adjustables.forEach(function(r,a){r.value.f_filiale===e&&t.push(r)}):this.adjustables.forEach(function(e,r){t.push(e)});var r={},a=t.reduce(function(e,t){return r[t.label]?"":r[t.label]=e.push(t),e},[]);return(0,o.default)(new s.default(a))},getOnlyPrice:function(){var e=[];this.price.forEach(function(t,r){if("有效"===t.f_state){var a={label:t.f_price_name,value:t};e.push(a)}});var t={},r=e.reduce(function(e,r){return t[r.label]?"":t[r.label]=e.push(r),e},[]);return(0,o.default)(new s.default(r))},getPrice:function(e){if(e.f_user_type&&e.f_gasproperties&&e.f_price_type){var t=[];e.filter?this.price.forEach(function(r){if("有效"===r.f_state&&e.f_user_type===r.f_user_type&&e.f_gasproperties===r.f_gasproperties&&e.f_price_type===r.f_price_type&&e.filter===r.f_filiale){var a={label:r.f_price_name,value:r};t.push(a)}}):this.price.forEach(function(r){if("有效"===r.f_state&&e.f_user_type===r.f_user_type&&e.f_gasproperties===r.f_gasproperties&&e.f_price_type===r.f_price_type){var a={label:r.f_price_name,value:r};t.push(a)}});var r={};return t=t.reduce(function(e,t){return r[t.label]?"":r[t.label]=e.push(t),e},[]),(0,o.default)(new s.default(t))}}};t.default=l},391:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),s=a(i),n=r(11),o=a(n),l=r(2),p=a(l),d=r(3),c=r(8),u=a(c),f=r(75),h=(a(f),p.default.mark(function e(t,r){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$showMessage("撤销后数据不可恢复，确认撤销录入吗？",["confirm","cancel"]);case 2:if(a=e.sent,"cancel"!==a){e.next=5;break}return e.abrupt("return");case 5:t.search();case 6:case"end":return e.stop()}},e,this)}));t.default={title:"操作汇总",data:function(){return{operationtypes:this.$appdata.getParam("报建业务类型"),model:new d.PagedList(""+this.sqlurl,9999,{condition:"\"f_operator= '"+this.$login.f.name+"'\"",items:'"'+this.items+'"',tablename:'"'+this.tablename+'"',orderitem:'"'+this.orderitem+'"'}),show:!1,asideTitle:"用户操作",row:Object,comp:null}},props:{sqlurl:{type:String,default:"rs/sql/getinstallrecord"},items:{type:String,default:"*"},tablename:{type:String,default:"t_stopapply"},orderitem:{type:String,default:"f_date desc"},btns:{type:Array},operationtype:{type:String,default:""},userinfoid:{},isOperate:{type:Boolean,default:!0}},ready:function(){this.$refs.paged.$refs.cri.model.f_operat_type=[this.operationtype],this.search();for(var e=0;e<this.model.length;e++)this.model[e].f_operate_date=this.model[e].f_operate_date.substring(16)},methods:{dateDes:function(e){return this.$login.dateDescripte(e)},selected:function(e){this.row===e?this.row=null:this.row=e},isSelected:function(e){return this.row===e},search:function(){var e=this,t="1=1";this.$login.f.parent.parent.name.includes("统一资源管理")||(t+="and f_filiale = '"+this.$login.f.f_fengongsi+"'"),this.$refs.pv.load(this.sqlurl,{data:{condition:t}}).then(function(t){return 0===t.data.length?(e.model.rows=[],e.model.state="错误",void(e.model.error="没有符合条件的记录")):(e.model.state="正确",void(e.model.rows=t.data))})},disEvent:function(e){this.$dispatch(""+e.eventName)},operate:function(e,t){var r=this;"票据补打"!==e||"机表收费"!==t.type&&"卡表收费"!==t.type&&"超用收费"!==t.type&&"发卡售气"!==t.type?"票据补打"===e&&"其他收费"===t.type?this.$resetpost("rs/sql/singleTable_OrderBy",{data:{orderitem:"id",items:"*",tablename:"t_othercharge",condition:"id = "+t.id}}).then(function(e){"国税发票"===e.data[0].f_charge_type?(t=(0,o.default)({},t,e.data[0]),r.$dispatch("list-select-oper",t.type+"票据补打","reissue-other-bill",t)):(t=(0,o.default)({},t,e.data[0]),r.$dispatch("list-select-oper",t.type+"票据补打","reissue-tax-other-bill",t))}).catch(function(e){if(e.status)return void r.$warn("加载数据出错, "+(0,s.default)(e));throw e}):"票据补打"===e&&"换表"===t.type?this.$resetpost("rs/sql/singleTable_OrderBy",{data:{orderitem:"id",items:"*",tablename:"t_changemeter",condition:"id = "+t.id}}).then(function(e){t=(0,o.default)({},t,e.data[0]),r.$dispatch("list-select-oper",t.type+"票据补打","reissue-change-meter-bill",t)}).catch(function(e){if(e.status)return void r.$warn("加载数据出错, "+(0,s.default)(e));throw e}):"撤销"===e&&this.$dispatch("list-select-oper","撤销","apply-record-cancel",t):this.$resetpost("rs/sql/singleTable_OrderBy",{data:{orderitem:"id",items:"*",tablename:"t_sellinggas",condition:"id = "+t.id}}).then(function(e){t=(0,o.default)({},t,e.data[0]),r.$dispatch("list-select-oper",t.type+"票据补打","reissue-bill",t)}).catch(function(e){if(e.status)return void r.$warn("加载数据出错, "+(0,s.default)(e));throw e})},operateCancel:function(e){var t=h(this,e);(0,u.default)(t)},selfSearch:function(e){this.$login.f.parent.parent.name.includes("统一资源管理")||(e.condition+="and f_filiale = '"+this.$login.f.f_fengongsi+"'"),this.model.search(e.condition,e.model)}},watch:{}}},761:function(e,t){e.exports=' <div> <partial-view v-ref:pv> <criteria-paged :model=model v-ref:paged :pager=false> <criteria partial=criteria @condition-changed=$parent.$parent.selfSearch v-ref:cri> <div novalidate class="flex-row select-overspread" partial style="white-space: nowarp"> <div class=form-group> <input type=text class="form-control width-100" v-model=model.f_userinfo_id placeholder=报建编号 condition="f_userinfo_id = \'{}\'"> </div> <div class=form-group style="flex: 1"> <v-select id=f_paytype v-model=model.f_operat_type placeholder=操作类型 :value.sync=model.f_operat_type :options=$parent.$parent.$parent.operationtypes condition="f_operat_type = \'{}\'" close-on-select></v-select> <partial name=cardcriteria></partial> </div> <div class=form-group> <button class="btn btn-success width-100" @click=search() id=base-rightVie-cardLis-查询>查询</button> </div> </div> </criteria> <accordion :one-at-atime=true type=info partial=list> <panel type=info v-for="row in model.rows" :is-open=true :is-click=false v-show="row.type===\'终止报建\'"> <span class="panel-title row" slot=header style="cursor: pointer"> <div class=col-sm-11> <div class=row> <strong class=col-sm-4>{{row.f_userinfo_id}}</strong> <span class=col-sm-4>{{$parent.$parent.$parent.dateDes(row.f_operate_date)}}</span> <span class=col-sm-4>{{row.type}}</span> </div> </div> <div class=col-sm-1 v-if=$parent.$parent.$parent.isOperate> <dropdown class=auto v-if="row.type === \'终止报建\'"> <button type=button data-toggle=dropdown style="border: 0px;background: none"> <span class="glyphicon glyphicon-th-list"></span> </button> <ul slot=dropdown-menu class="dropdown-menu dropdown-menu-right" style="min-width: 60px"> <li v-if="row.type === \'终止报建\'"> <a href=# @click.stop="$parent.$parent.$parent.operate(\'撤销\', row)">撤销</a> </li> </ul> </dropdown> </div> <div class=panel-body v-if=$parent.$parent.$parent.isSelected(row)> <stopapply-apply-detail v-if="row.type === \'终止报建\'" :data=row></stopapply-apply-detail> </div> <div v-if=!$parent.$parent.$parent.isSelected(row) style="margin-top: 8px;background: #FFF"> <p>{{row.f_describe}}</p> </div> </span></panel> </accordion> </criteria-paged> </partial-view> </div> '},942:function(e,t,r){var a,i,s={};a=r(391),i=r(761),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var n="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(n.template=i),n.computed||(n.computed={}),Object.keys(s).forEach(function(e){var t=s[e];n.computed[e]=function(){return t}})}});
//# sourceMappingURL=47.js.map