{"version":3,"sources":["webpack:///72.js","webpack:///ServiceControl.vue?f65e","webpack:///./src/components/app_apply/ServiceControl.vue?1824*","webpack:///./src/components/app_apply/ServiceControl.vue?9534"],"names":["webpackJsonp","79","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_assign","_assign2","_regenerator","_regenerator2","_stringify","_stringify2","_asyncToGenerator2","_asyncToGenerator3","_co","_co2","_vue","_vue2","_vueClient","title","props","data","json_datas","showview","show_data","department_search","methods","special","_x","_ref","apply","this","arguments","mark","_callee","model","http","res","_http","_res","wrap","_context","prev","next","console","log","distribute_async","button","button_name","HttpResetClass","load","$androidUtil","getProxyUrl","loginUser","$login","f","resolveMsg","rejectMsg","sent","stop","refurbish","$workflow_vue","$showMessage","sum","jsonData","i","activitys","length","selectdata","defname","initializtion","_ref2","_callee2","url","jsonString","jsonArray","param","_i","j","k","array","_k","temp","_context2","actorexpression","startsWith","push","fields","field","type","label","$appdata","getParam","options","buttons","button_fields","Number","id","name","JSON","parse","f_back_reason","deleteLocalApply","bzLogic","events","select_cascade","index","_x2","_ref3","_callee3","delteLocal","person_name","btn","_context3","abrupt","button_index","btn_operate","watch","deep","self","_context4","tables","start_activity","user","then","code","$dispatch","msg","catch","ret","127","134","__vue_script__","__vue_template__","__vue_styles__","__vue_options__","template","computed","keys","forEach","key"],"mappings":"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","file":"72.js","sourcesContent":["webpackJsonp([72],{\n\n/***/ 79:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _assign = __webpack_require__(11);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _regenerator = __webpack_require__(2);\n\t\n\tvar _regenerator2 = _interopRequireDefault(_regenerator);\n\t\n\tvar _stringify = __webpack_require__(6);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _asyncToGenerator2 = __webpack_require__(7);\n\t\n\tvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\t\n\tvar _co = __webpack_require__(8);\n\t\n\tvar _co2 = _interopRequireDefault(_co);\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _vueClient = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  title: '报建流程业务控制层',\n\t  props: ['selectdata'],\n\t  data: function data() {\n\t    return {\n\t      data: null,\n\t      json_datas: null,\n\t      showview: false,\n\t      show_data: null,\n\t      department_search: null };\n\t  },\n\t\n\t  methods: {\n\t    special: function () {\n\t      var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(model) {\n\t        var http, res, _http, _res;\n\t\n\t        return _regenerator2.default.wrap(function _callee$(_context) {\n\t          while (1) {\n\t            switch (_context.prev = _context.next) {\n\t              case 0:\n\t                console.log('进入async special方法');\n\t\n\t                if (!(this.data.distribute_async && model.button.button_name === '下发')) {\n\t                  _context.next = 7;\n\t                  break;\n\t                }\n\t\n\t                http = new _vueClient.HttpResetClass();\n\t                _context.next = 5;\n\t                return http.load('POST', this.$androidUtil.getProxyUrl() + '/rs/logic/syncprocess', { data: { model: model, loginUser: this.$login.f } }, { resolveMsg: null, rejectMsg: '流程异步下发据保存失败' });\n\t\n\t              case 5:\n\t                res = _context.sent;\n\t\n\t                console.log(\"流程的异步处理：\", (0, _stringify2.default)(res.data));\n\t\n\t              case 7:\n\t                if (!(this.data.distribute_async && model.button.button_name === '完成')) {\n\t                  _context.next = 13;\n\t                  break;\n\t                }\n\t\n\t                _http = new _vueClient.HttpResetClass();\n\t                _context.next = 11;\n\t                return _http.load('POST', this.$androidUtil.getProxyUrl() + '/rs/logic/stoprocess', { data: { model: model, loginUser: this.$login.f } }, { resolveMsg: null, rejectMsg: '流程异步完成数据保存失败' });\n\t\n\t              case 11:\n\t                _res = _context.sent;\n\t\n\t                console.log(\"流程的异步处理：\", (0, _stringify2.default)(_res.data));\n\t\n\t              case 13:\n\t              case 'end':\n\t                return _context.stop();\n\t            }\n\t          }\n\t        }, _callee, this);\n\t      }));\n\t\n\t      function special(_x) {\n\t        return _ref.apply(this, arguments);\n\t      }\n\t\n\t      return special;\n\t    }(),\n\t    refurbish: function refurbish() {\n\t      if (!this.$workflow_vue) {\n\t        this.$showMessage('流程配置文件不存在，请反馈系统管理员');\n\t        return;\n\t      }\n\t      console.log('内存中的流程配置文件数据=>' + (0, _stringify2.default)(this.$workflow_vue));\n\t      this.json_datas = this.$workflow_vue;\n\t      var sum = 0;\n\t      var jsonData = {};\n\t      for (var i = 0; i < this.json_datas.activitys.length; i++) {\n\t        if (this.selectdata.defname == this.json_datas.activitys[i].title) {\n\t          jsonData = this.json_datas.activitys[i];\n\t          sum++;\n\t        }\n\t      }\n\t      console.log('sum=>' + sum);\n\t      if (sum == 1) {\n\t        this.data = null;\n\t        this.data = jsonData;\n\t        console.log('调用initializtion前的this.data=>' + (0, _stringify2.default)(this.data));\n\t        this.initializtion();\n\t      } else if (sum == 0) {\n\t        this.$showMessage('\\u6CA1\\u6709\\u5728JSON\\u914D\\u7F6E\\u6587\\u4EF6\\u4E2D\\u627E\\u5230\\u6D3B\\u52A8\\u540D\\u4E3A:(' + this.selectdata.defname + ')\\u7684\\u8282\\u70B9\\u914D\\u7F6E');\n\t      } else {\n\t        this.$showMessage('\\u5728JSON\\u914D\\u7F6E\\u6587\\u4EF6\\u4E2D\\u627E\\u5230\\u6D3B\\u52A8\\u540D\\u4E3A:(' + this.selectdata.defname + ')\\u7684\\u8282\\u70B9\\u914D\\u7F6E:' + sum + '\\u4E2A');\n\t      }\n\t    },\n\t    initializtion: function () {\n\t      var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {\n\t        var http, url, res, jsonString, jsonArray, i, param, _i, j, k, array, _k, temp;\n\t\n\t        return _regenerator2.default.wrap(function _callee2$(_context2) {\n\t          while (1) {\n\t            switch (_context2.prev = _context2.next) {\n\t              case 0:\n\t                console.log('进入initializtion()方法');\n\t\n\t                if (!this.selectdata.actorexpression) {\n\t                  _context2.next = 13;\n\t                  break;\n\t                }\n\t\n\t                http = new _vueClient.HttpResetClass();\n\t                url = this.$androidUtil.getProxyUrl() + '/rs/search';\n\t\n\t                console.log('即将请求后台获取下发人员，url=>' + url);\n\t                _context2.next = 7;\n\t                return http.load('POST', url, this.selectdata.actorexpression, { resolveMsg: null, rejectMsg: '获取当前部门人员失败' });\n\t\n\t              case 7:\n\t                res = _context2.sent;\n\t\n\t                console.log(\"请求后台获取下发人员结果转换=>\" + (0, _stringify2.default)(res));\n\t                jsonString = (0, _stringify2.default)(res.data);\n\t                jsonArray = [];\n\t\n\t                if (jsonString.startsWith(\"{\")) {\n\t                  jsonArray.push(res.data);\n\t                  res.data = jsonArray;\n\t                }\n\t                this.department_search = res.data;\n\t\n\t              case 13:\n\t                console.log('即将合并data与selectdata,selectdata数据=>' + (0, _stringify2.default)(this.selectdata));\n\t                this.data = (0, _assign2.default)({}, this.data, this.selectdata);\n\t                console.log('this.data的值=>' + (0, _stringify2.default)(this.data));\n\t\n\t                console.log('this.data.fields.length=>' + this.data.fields.length);\n\t                for (i = 0; i < this.data.fields.length; i++) {\n\t                  if (this.selectdata[this.data.fields[i].field]) {\n\t                    this.data.fields[i].value = this.selectdata[this.data.fields[i].field];\n\t                  }\n\t\n\t                  if (this.data.fields[i].type == 'select') {\n\t                    console.log('进入下拉框参数获取方法,参数名称=>' + this.data.fields[i].label);\n\t                    console.log('$appdata中的缓存参数与单值=>' + (0, _stringify2.default)(this.$appdata));\n\t                    param = this.$appdata.getParam(this.data.fields[i].label);\n\t\n\t                    console.log(param);\n\t                    this.data.fields[i].options = param;\n\t                  }\n\t                }\n\t\n\t                for (_i = 0; _i < this.data.buttons.length; _i++) {\n\t                  if (this.data.buttons[_i].button_fields) {\n\t                    for (j = 0; j < this.data.buttons[_i].button_fields.length; j++) {\n\t                      if (this.selectdata[this.data.buttons[_i].button_fields[j].field]) {\n\t                        this.data.buttons[_i].button_fields[j].value = this.selectdata[this.data.buttons[_i].button_fields[j].field];\n\t                      }\n\t\n\t                      if (this.data.buttons[_i].button_fields[j].type === 'select' && this.$appdata.getParam(this.data.buttons[_i].button_fields[j].label)) {\n\t                        this.data.buttons[_i].button_fields[j].options = this.$appdata.getParam(this.data.buttons[_i].button_fields[j].label);\n\t                      }\n\t\n\t                      if (this.data.buttons[_i].button_name === '下发') {\n\t                        if (this.data.buttons[_i].button_fields.length === 1) {\n\t                          if (this.selectdata[this.data.buttons[_i].button_fields[0].field]) {\n\t                            for (k = 0; k < this.department_search.length; k++) {\n\t                              if (Number(this.department_search[k].id) === Number(this.selectdata[this.data.buttons[_i].button_fields[0].field])) {\n\t                                this.data.buttons[_i].button_fields[0].value = this.department_search[k].name;\n\t                              }\n\t                            }\n\t                          }\n\t\n\t                          if (this.department_search) {\n\t                            array = [];\n\t\n\t                            for (_k = 0; _k < this.department_search.length; _k++) {\n\t                              array.push({ label: this.department_search[_k].name, value: this.department_search[_k].name });\n\t                            }\n\t                            this.data.buttons[_i].button_fields[0].options = array;\n\t                          }\n\t                        } else {\n\t                          this.$showMessage(\"下发按钮必须满足 当且仅当一个字段\");\n\t                        }\n\t                      }\n\t                    }\n\t                  }\n\t                }\n\t                temp = JSON.parse((0, _stringify2.default)(this.data));\n\t\n\t                if (this.selectdata.f_back_reason) {\n\t                  temp['back_reason'] = this.selectdata.f_back_reason;\n\t                }\n\t                console.log('即将给show_data赋值temp=>' + (0, _stringify2.default)(temp));\n\t                this.show_data = temp;\n\t                console.log('initializtion()方法结束,showview');\n\t                this.showview = true;\n\t\n\t              case 25:\n\t              case 'end':\n\t                return _context2.stop();\n\t            }\n\t          }\n\t        }, _callee2, this);\n\t      }));\n\t\n\t      function initializtion() {\n\t        return _ref2.apply(this, arguments);\n\t      }\n\t\n\t      return initializtion;\n\t    }(),\n\t    deleteLocalApply: function deleteLocalApply(model) {\n\t      console.log('\\u524D\\u53F0\\u4E0A\\u4F20\\u5B8C\\u6210\\uFF0C\\u5F00\\u59CB\\u5220\\u9664\\u672C\\u5730\\u62A5\\u5EFA\\u5DE5\\u5355');\n\t      this.$androidUtil.bzLogic('deleteApply', { data: model });\n\t    }\n\t  },\n\t  events: {\n\t    'select_cascade': function select_cascade(index) {},\n\t    'button': function () {\n\t      var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(model) {\n\t        var delteLocal, person_name, i, http, url, btn;\n\t        return _regenerator2.default.wrap(function _callee3$(_context3) {\n\t          while (1) {\n\t            switch (_context3.prev = _context3.next) {\n\t              case 0:\n\t                console.log('进入async button事件方法');\n\t                delteLocal = true;\n\t\n\t                if (model.button.button_name == '保存' || model.button.button_name === '重置') {\n\t                  delteLocal = false;\n\t                }\n\t\n\t                if (!(model.button.button_name === '重置')) {\n\t                  _context3.next = 6;\n\t                  break;\n\t                }\n\t\n\t                this.initializtion();\n\t                return _context3.abrupt('return');\n\t\n\t              case 6:\n\t                if (model.button.button_name === '下发') {\n\t                  person_name = model.button.button_fields[this.show_data.buttons[model.button.button_index].button_fields[0].field];\n\t\n\t                  for (i = 0; i < this.department_search.length; i++) {\n\t                    if (this.department_search[i].name === person_name) {\n\t                      model.button.button_fields[this.show_data.buttons[model.button.button_index].button_fields[0].field] = this.department_search[i].id;\n\t                    }\n\t                  }\n\t                }\n\t                console.log(\"button事件接收参数model=>\" + (0, _stringify2.default)(model));\n\t                model = (0, _assign2.default)({}, this.selectdata, model);\n\t                console.log('合并selectdata与model后的model=>' + (0, _stringify2.default)(model));\n\t                http = new _vueClient.HttpResetClass();\n\t                url = this.$androidUtil.getProxyUrl() + '/rs/logic/ApplyProductService';\n\t                btn = btn_operate(this, url, http, model, delteLocal);\n\t\n\t                (0, _co2.default)(btn);\n\t\n\t              case 14:\n\t              case 'end':\n\t                return _context3.stop();\n\t            }\n\t          }\n\t        }, _callee3, this);\n\t      }));\n\t\n\t      function button(_x2) {\n\t        return _ref3.apply(this, arguments);\n\t      }\n\t\n\t      return button;\n\t    }()\n\t  },\n\t  watch: {\n\t    'selectdata': function selectdata() {\n\t      console.log('进入selectdata改变事件data=>' + (0, _stringify2.default)(this.selectdata));\n\t      this.refurbish();\n\t    },\n\t\n\t    deep: true\n\t  }\n\t};\n\t\n\t\n\tvar btn_operate = _regenerator2.default.mark(function btn_operate(self, url, http, model, delteLocal) {\n\t  return _regenerator2.default.wrap(function btn_operate$(_context4) {\n\t    while (1) {\n\t      switch (_context4.prev = _context4.next) {\n\t        case 0:\n\t          console.log('即将请求后台url=>' + url);\n\t          http.load('POST', url, { data: { tables: self.data.tables, start_activity: self.$workflow_vue.start_activity, model: model, loginUser: _vue2.default.user } }, { resolveMsg: null, rejectMsg: null }).then(function (res) {\n\t            console.log((0, _stringify2.default)(res));\n\t            if (res.code = 200) {\n\t              self.showview = false;\n\t\n\t              if (delteLocal) {\n\t                self.deleteLocalApply(model);\n\t              }\n\t\n\t              self.special(model);\n\t              self.$dispatch('close');\n\t              self.initializtion();\n\t              self.$showMessage('操作成功');\n\t            } else {\n\t              self.$showMessage('操作失败,原因:' + res.data.msg);\n\t            }\n\t          }).catch(function (ret) {\n\t            self.$showMessage('操作异常,原因:' + (0, _stringify2.default)(ret.data));\n\t          });\n\t\n\t        case 2:\n\t        case 'end':\n\t          return _context4.stop();\n\t      }\n\t    }\n\t  }, btn_operate, this);\n\t});\n\n/***/ }),\n\n/***/ 127:\n/***/ (function(module, exports) {\n\n\tmodule.exports = \" <service-view-app v-ref:service_show :data=show_data v-if=showview></service-view-app> \";\n\n/***/ }),\n\n/***/ 134:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\tvar __vue_styles__ = {}\n\t__vue_script__ = __webpack_require__(79)\n\t__vue_template__ = __webpack_require__(127)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\n\tif (__vue_template__) {\n\t__vue_options__.template = __vue_template__\n\t}\n\tif (!__vue_options__.computed) __vue_options__.computed = {}\n\tObject.keys(__vue_styles__).forEach(function (key) {\n\tvar module = __vue_styles__[key]\n\t__vue_options__.computed[key] = function () { return module }\n\t})\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 72.js","<template>\n  <service-view-app v-ref:service_show :data=\"show_data\" v-if=\"showview\"></service-view-app>\n</template>\n<script>\n  import co from 'co'\n  import Vue from 'vue'\n  import {HttpResetClass} from 'vue-client'\n  export default {\n    title: '报建流程业务控制层',\n    props: ['selectdata'],\n    data () {\n      return {\n        data:null, // 数据库数据，json配置文件数据的数据集合\n        json_datas:null, // Json配置文件集合\n        showview:false, // 控制显示service-view组件\n        show_data:null, // 给view层显示的数据\n        department_search:null // 当前部门下所有人\n      }\n    },\n    methods: {\n      // 特殊化处理\n      async special(model){\n        console.log('进入async special方法')\n        if(this.data.distribute_async && model.button.button_name==='下发'){\n          // 流程异步处理\n          let http = new HttpResetClass();\n          let res = await http.load('POST',this.$androidUtil.getProxyUrl() + '/rs/logic/syncprocess',{data:{model:model,loginUser:this.$login.f}}, {resolveMsg: null, rejectMsg: '流程异步下发据保存失败'})\n          console.log(\"流程的异步处理：\",JSON.stringify(res.data))\n        }\n        if(this.data.distribute_async && model.button.button_name==='完成'){\n          // 强制结束\n          let http = new HttpResetClass();\n          let res = await http.load('POST',this.$androidUtil.getProxyUrl() + '/rs/logic/stoprocess',{data:{model:model,loginUser:this.$login.f}}, {resolveMsg: null, rejectMsg: '流程异步完成数据保存失败'})\n          console.log(\"流程的异步处理：\",JSON.stringify(res.data))\n        }\n      },\n      // 组件初始化操作\n       refurbish(){\n         if(!this.$workflow_vue){\n            this.$showMessage('流程配置文件不存在，请反馈系统管理员')\n            return\n         }\n         console.log('内存中的流程配置文件数据=>' + JSON.stringify(this.$workflow_vue))\n        this.json_datas=this.$workflow_vue\n        let sum = 0\n        let jsonData ={}\n        for(let i=0;i<this.json_datas.activitys.length;i++){\n          if(this.selectdata.defname==this.json_datas.activitys[i].title){\n            jsonData = this.json_datas.activitys[i]\n            sum++\n          }\n        }\n         console.log('sum=>' + sum)\n        if(sum==1){\n          this.data =null\n          this.data = jsonData\n          console.log('调用initializtion前的this.data=>' + JSON.stringify(this.data))\n          this.initializtion()\n\n        } else if(sum==0) {\n          this.$showMessage(`没有在JSON配置文件中找到活动名为:(${this.selectdata.defname})的节点配置`)\n        } else {\n          this.$showMessage(`在JSON配置文件中找到活动名为:(${this.selectdata.defname})的节点配置:${sum}个`)\n        }\n      },\n      // json配置数据处理 比如下拉框的options\n      async initializtion() {\n        console.log('进入initializtion()方法')\n        // 下发人 options 处理，options初始化\n        if(this.selectdata.actorexpression){\n          let http = new HttpResetClass()\n          var url = this.$androidUtil.getProxyUrl() + '/rs/search'\n          console.log('即将请求后台获取下发人员，url=>' + url)\n          let res = await http.load('POST', url, this.selectdata.actorexpression, {resolveMsg: null, rejectMsg: '获取当前部门人员失败'})\n          console.log(\"请求后台获取下发人员结果转换=>\" + JSON.stringify(res))\n          let jsonString = JSON.stringify(res.data)\n          let jsonArray = []\n          if(jsonString.startsWith(\"{\")){\n            jsonArray.push(res.data)\n            res.data = jsonArray\n          }\n          this.department_search = res.data\n        }\n\n        // data 填充 selectdata\n        console.log('即将合并data与selectdata,selectdata数据=>' + JSON.stringify(this.selectdata))\n        this.data = Object.assign({},this.data, this.selectdata)\n        console.log('this.data的值=>' + JSON.stringify(this.data))\n\n        // 初始化 fields\n        console.log('this.data.fields.length=>' + this.data.fields.length)\n        for(let i=0;i<this.data.fields.length;i++){\n          // 如果selectdata有这些key，则把selectdata的value赋值给data的value\n          if(this.selectdata[this.data.fields[i].field]){\n            this.data.fields[i].value = this.selectdata[this.data.fields[i].field]\n          }\n          // 如果配置类型为select,优先从参数列表获取options\n          if(this.data.fields[i].type == 'select'){\n            console.log('进入下拉框参数获取方法,参数名称=>' + this.data.fields[i].label)\n            console.log('$appdata中的缓存参数与单值=>' + JSON.stringify(this.$appdata))\n            var param = this.$appdata.getParam(this.data.fields[i].label)\n            console.log(param)\n            this.data.fields[i].options = param\n\n          }\n        }\n        // 初始化 buttons_fields\n        for(let i=0;i<this.data.buttons.length;i++){\n          if(this.data.buttons[i].button_fields){\n            for(let j=0;j<this.data.buttons[i].button_fields.length;j++){\n              // 如果selectdata有这些key，则把selectdata的value赋值给data的value\n              if(this.selectdata[this.data.buttons[i].button_fields[j].field]){\n                this.data.buttons[i].button_fields[j].value = this.selectdata[this.data.buttons[i].button_fields[j].field]\n              }\n              // 如果配置类型为select,优先从参数列表获取options\n              if(this.data.buttons[i].button_fields[j].type==='select'&&this.$appdata.getParam(this.data.buttons[i].button_fields[j].label)){\n                this.data.buttons[i].button_fields[j].options=this.$appdata.getParam(this.data.buttons[i].button_fields[j].label)\n              }\n              // 下发特殊配置\n              if(this.data.buttons[i].button_name==='下发'){\n                if(this.data.buttons[i].button_fields.length===1){\n                  // value初始化\n                  // if(this.department_search){\n                  if(this.selectdata[this.data.buttons[i].button_fields[0].field]){\n                    for(let k=0;k<this.department_search.length;k++){\n                      // 将id转换为name\n                      if(Number(this.department_search[k].id) === Number(this.selectdata[this.data.buttons[i].button_fields[0].field])){\n                        this.data.buttons[i].button_fields[0].value=this.department_search[k].name\n                      }\n                    }\n                  }\n\n                  if(this.department_search){\n                    let array = []\n                    for(let k=0;k<this.department_search.length;k++){\n                      array.push({label:this.department_search[k].name,value:this.department_search[k].name})\n                    }\n                    this.data.buttons[i].button_fields[0].options = array\n                  }\n                }else {\n                  this.$showMessage(\"下发按钮必须满足 当且仅当一个字段\")\n                }\n              }\n            }\n          }\n        }\n        // 消除双向绑定，避免子组件（显示层）数据更改，父组件（控制层）也更改\n        let temp = JSON.parse(JSON.stringify(this.data))\n        // 退回原因展示\n        if(this.selectdata.f_back_reason){\n          temp['back_reason'] = this.selectdata.f_back_reason\n        }\n        console.log('即将给show_data赋值temp=>' + JSON.stringify(temp))\n        this.show_data = temp\n        console.log('initializtion()方法结束,showview')\n        this.showview = true\n      },\n      deleteLocalApply(model){\n        console.log(`前台上传完成，开始删除本地报建工单`)\n        this.$androidUtil.bzLogic('deleteApply', {data:model})\n      }\n    },\n    events: {\n      // 任意select选中时触发事件\n      'select_cascade'(index){\n        // this.$refs.service_show.model_temp // 子业务显示组件\n        // 级联操作示例：\n        /*\n         if(this.$refs.service_show.model_temp.activitys.ields[index].label==='报建类型'){\n          for(let i=0;i<this.$refs.service_show.model_temp.activitys.fields.length;i++){\n            // 控制设置级联\n            // 源select所选的值 this.$refs.service_show.model_temp.activitys.fields[index].value\n            if(this.$refs.service_show.model_temp.activitys.fields[i].label==='级联测试2'){\n              this.$refs.service_show.model_temp.activitys.fields[i].options=[\n                {label:'级联选项1',value:'级联选项1'},{label:'级联选项2',value:'级联选项2'},{label:'级联选项3',value:'级联选项3'}\n              ]\n            }\n          }\n        }\n        */\n      },\n      // 获取view层button事件\n      async 'button'(model){\n        console.log('进入async button事件方法')\n        var delteLocal = true\n        // 点击保存与重置按钮不需要修改本地工单状态\n        if(model.button.button_name == '保存' || model.button.button_name==='重置'){\n          delteLocal = false\n        }\n        // 点击重置按钮就重置数据\n        if(model.button.button_name==='重置'){\n          this.initializtion()\n          return\n        }\n        if(model.button.button_name==='下发'){\n           let person_name = model.button.button_fields[this.show_data.buttons[model.button.button_index].button_fields[0].field]\n          for(let i=0;i<this.department_search.length;i++){\n             // 找到人名为person_name 的人，然后把人名换成id\n            if(this.department_search[i].name === person_name){\n              model.button.button_fields[this.show_data.buttons[model.button.button_index].button_fields[0].field] = this.department_search[i].id\n            }\n          }\n        }\n        console.log(\"button事件接收参数model=>\" + JSON.stringify(model))\n        model=Object.assign({},this.selectdata,model)\n        console.log('合并selectdata与model后的model=>' + JSON.stringify(model))\n        let http = new HttpResetClass()\n        var url = this.$androidUtil.getProxyUrl() + '/rs/logic/ApplyProductService'\n        // let res = await http.load('POST',url,{data:{tables:this.data.tables,start_activity:this.$workflow_vue.start_activity,model:model,loginUser:Vue.user}}, {resolveMsg: null, rejectMsg: null})\n        // // 先判断是否包含code，如果服务端异常，可能不存在code\n        // console.log(\"service处理完成返回数据=>\" + res)\n        // if(!res.code){\n        //   console.log(\"service处理完成返回数据=>\" + res)\n        //   this.$showMessage('操作异常,原因:' + res)\n        // }else{\n        //   console.log(\"service处理完成返回数据=>\" + JSON.stringify(res))\n        //   if(res.code = 200){\n        //     this.showview = false\n        //     // 特殊处理\n        //     this.special(model)\n        //     this.$dispatch('close')\n        //     this.initializtion()\n        //     this.$showMessage('操作成功')\n        //   }else{\n        //     this.$showMessage('操作失败,原因:' + res.data.msg)\n        //   }\n        // }\n        let btn = btn_operate(this, url, http, model, delteLocal)\n        co(btn)\n      }\n    },\n    watch:{\n      // 监听selectdata的变化\n      'selectdata'() {\n          console.log('进入selectdata改变事件data=>' + JSON.stringify(this.selectdata))\n          this.refurbish()\n      },\n      deep:true\n    }\n  }\n\n  let btn_operate = function * (self, url, http, model, delteLocal) {\n    // 下发，提交，保存，退回都在后台处理\n    console.log('即将请求后台url=>' + url)\n    http.load('POST',url,{data:{tables:self.data.tables,start_activity:self.$workflow_vue.start_activity,model:model,loginUser:Vue.user}}, {resolveMsg: null, rejectMsg: null})\n      .then((res) => {\n        console.log(JSON.stringify(res))\n        if(res.code = 200){\n          self.showview = false\n          // 如果需要删除本地记录则去删除\n          if(delteLocal){\n            self.deleteLocalApply(model)\n          }\n          // 特殊处理\n          self.special(model)\n          self.$dispatch('close')\n          self.initializtion()\n          self.$showMessage('操作成功')\n        }else{\n          self.$showMessage('操作失败,原因:' + res.data.msg)\n        }\n      })\n      .catch((ret) => {\n        self.$showMessage('操作异常,原因:' + JSON.stringify(ret.data))\n      })\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ServiceControl.vue?2aeb3266","module.exports = \" <service-view-app v-ref:service_show :data=show_data v-if=showview></service-view-app> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/app_apply/ServiceControl.vue\n// module id = 127\n// module chunks = 8 72","var __vue_script__, __vue_template__\nvar __vue_styles__ = {}\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./ServiceControl.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./ServiceControl.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\nif (__vue_template__) {\n__vue_options__.template = __vue_template__\n}\nif (!__vue_options__.computed) __vue_options__.computed = {}\nObject.keys(__vue_styles__).forEach(function (key) {\nvar module = __vue_styles__[key]\n__vue_options__.computed[key] = function () { return module }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/app_apply/ServiceControl.vue\n// module id = 134\n// module chunks = 8 72"],"sourceRoot":""}