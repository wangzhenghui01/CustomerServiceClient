{"version":3,"sources":["webpack:///84.js","webpack:///material_recording.vue","webpack:///./src/components/product/Function/functions/material_recording.vue?efc6","webpack:///./src/components/product/Function/functions/material_recording.vue"],"names":["webpackJsonp","395","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_stringify","_stringify2","_asyncToGenerator2","_asyncToGenerator3","_regenerator","_regenerator2","_vueClient","_InputAndSelect","_InputAndSelect2","mark","gen","self","val","wrap","_context","prev","next","f_actualfee_type","f_bill_type","$resetpost","data","tablename","parameters","id","then","reset","stop","this","components","InputAndSelect","title","model","f_payfee_operator","f_payfee_department","f_filiale","f_payfee_date","rows","detailModel","isShowdetail","props","ready","load","$login","f","name","f_parentname","f_fengongsi","toStandardDateString","methods","showdetail","_x","_x2","_ref","apply","arguments","_callee","index","http","res","i","_context2","console","log","HttpResetClass","condition","resolveMsg","rejectMsg","sent","length","f_batch_importdate","substring","goback","$dispatch","showview","_ref2","_callee2","_context3","infee","f_apply_num","822","1027","__vue_script__","__vue_template__","__vue_styles__","__vue_options__","options","template","computed","keys","forEach","key"],"mappings":"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","file":"84.js","sourcesContent":["webpackJsonp([84],{\n\n/***/ 395:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(5);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _asyncToGenerator2 = __webpack_require__(4);\n\t\n\tvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\t\n\tvar _regenerator = __webpack_require__(2);\n\t\n\tvar _regenerator2 = _interopRequireDefault(_regenerator);\n\t\n\tvar _vueClient = __webpack_require__(3);\n\t\n\tvar _InputAndSelect = __webpack_require__(76);\n\t\n\tvar _InputAndSelect2 = _interopRequireDefault(_InputAndSelect);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar gen = _regenerator2.default.mark(function gen(self, val) {\n\t  return _regenerator2.default.wrap(function gen$(_context) {\n\t    while (1) {\n\t      switch (_context.prev = _context.next) {\n\t        case 0:\n\t          val.f_actualfee_type = val.f_actualfee_type[0];\n\t          val.f_bill_type = val.f_bill_type[0];\n\t          _context.next = 4;\n\t          return self.$resetpost('rs/logic/saveentity', { data: { tablename: 't_apply', parameters: val } });\n\t\n\t        case 4:\n\t          delete val.id;\n\t          self.$resetpost('rs/logic/saveentity', { data: { tablename: 't_record', parameters: val } }).then(function () {\n\t            self.reset();\n\t          });\n\t\n\t        case 6:\n\t        case 'end':\n\t          return _context.stop();\n\t      }\n\t    }\n\t  }, gen, this);\n\t});\n\texports.default = {\n\t  components: { InputAndSelect: _InputAndSelect2.default },\n\t  title: '报装收费',\n\t  data: function data() {\n\t    return {\n\t\n\t      model: {\n\t        f_payfee_operator: '',\n\t        f_payfee_department: '',\n\t        f_filiale: '',\n\t        f_payfee_date: '',\n\t        rows: [] },\n\t      detailModel: {\n\t        rows: []\n\t      },\n\t      isShowdetail: false\n\t    };\n\t  },\n\t\n\t  props: ['infee'],\n\t  ready: function ready() {\n\t    this.load();\n\t    this.model.f_payfee_operator = this.$login.f.name;\n\t    this.model.f_payfee_department = this.$login.f.f_parentname;\n\t    this.model.f_filiale = this.$login.f.f_fengongsi;\n\t    this.model.f_payfee_date = this.$login.toStandardDateString();\n\t  },\n\t\n\t  methods: {\n\t    showdetail: function () {\n\t      var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(val, index) {\n\t        var http, data, res, i;\n\t        return _regenerator2.default.wrap(function _callee$(_context2) {\n\t          while (1) {\n\t            switch (_context2.prev = _context2.next) {\n\t              case 0:\n\t                console.log(val);\n\t                this.isShowdetail = true;\n\t                http = new _vueClient.HttpResetClass();\n\t                data = {\n\t                  tablename: 't_receipt_detail',\n\t                  condition: 'f_sheet_id = \\'' + val + '\\''\n\t                };\n\t\n\t\n\t                console.log('即将获取材料明细记录数据');\n\t                _context2.next = 7;\n\t                return http.load('POST', 'rs/sql/singleTable', { data: data }, { resolveMsg: null, rejectMsg: '获取材料明细记录数据失败' });\n\t\n\t              case 7:\n\t                res = _context2.sent;\n\t\n\t                console.log('获取材料明细记录数据结果=>' + (0, _stringify2.default)(res.data));\n\t\n\t                for (i = 0; i < res.data.length; i++) {\n\t                  res.data[i].f_batch_importdate = res.data[i].f_batch_importdate.substring(0, 11);\n\t                }\n\t                this.detailModel.rows = res.data;\n\t\n\t              case 11:\n\t              case 'end':\n\t                return _context2.stop();\n\t            }\n\t          }\n\t        }, _callee, this);\n\t      }));\n\t\n\t      function showdetail(_x, _x2) {\n\t        return _ref.apply(this, arguments);\n\t      }\n\t\n\t      return showdetail;\n\t    }(),\n\t    goback: function goback() {\n\t      this.$dispatch('hiddenbtn');\n\t      this.showview = false;\n\t    },\n\t    reset: function reset() {\n\t      this.$dispatch('close');\n\t      this.$dispatch('selfsearch');\n\t    },\n\t    load: function () {\n\t      var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {\n\t        var http, data, res, i;\n\t        return _regenerator2.default.wrap(function _callee2$(_context3) {\n\t          while (1) {\n\t            switch (_context3.prev = _context3.next) {\n\t              case 0:\n\t                http = new _vueClient.HttpResetClass();\n\t                data = {\n\t                  tablename: 't_receipt_sheet',\n\t                  condition: 'f_apply_num = \\'' + this.infee.f_apply_num + '\\''\n\t                };\n\t\n\t\n\t                console.log('即将获取材料批次记录数据');\n\t                _context3.next = 5;\n\t                return http.load('POST', 'rs/sql/singleTable', { data: data }, { resolveMsg: null, rejectMsg: '获取材料批次记录数据失败' });\n\t\n\t              case 5:\n\t                res = _context3.sent;\n\t\n\t                console.log('获取材料批次记录数据响应结果=>' + (0, _stringify2.default)(res.data));\n\t\n\t                for (i = 0; i < res.data.length; i++) {\n\t                  res.data[i].f_batch_importdate = res.data[i].f_batch_importdate.substring(0, 11);\n\t                }\n\t                this.model.rows = res.data;\n\t\n\t              case 9:\n\t              case 'end':\n\t                return _context3.stop();\n\t            }\n\t          }\n\t        }, _callee2, this);\n\t      }));\n\t\n\t      function load() {\n\t        return _ref2.apply(this, arguments);\n\t      }\n\t\n\t      return load;\n\t    }()\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 822:\n/***/ (function(module, exports) {\n\n\tmodule.exports = \" <div class=\\\"col-sm-12 auto select-overspread\\\"> <div class=\\\"auto select-overspread\\\"> <div class=\\\"panel panel-info\\\"> <div class=\\\"panel-heading auto\\\"> <h3 class=panel-title>材料记录展示</h3> </div> </div> </div> <div class=\\\"col-sm-12 span recordTable\\\" style=\\\"margin-top: 10px;min-height: 80px;max-height:200px\\\"> <partial-view v-ref:single-load> <data-grid :model=model v-ref:grid> <template partial=head> <tr> <th>序号</th> <th>材料批次id</th> <th>分公司</th> <th>操作部门</th> <th>领料批次操作人</th> <th>导入时间</th> </tr> </template> <template partial=body> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{$index+1}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_batch_id}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_filiale}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_parentname}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_sheet_operator}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_batch_importdate}}</td> </template> </data-grid> </partial-view> </div> <div class=\\\"col-sm-12 span recordTable\\\" style=\\\"margin-top: 10px;min-height: 100px;max-height:300px\\\" v-if=isShowdetail> <p>材料清单 <button type=button class=close @click=\\\"isShowdetail=false\\\" aria-hidden=true>&times;</button> </p> <partial-view v-ref:single-load> <data-grid :model=detailModel v-ref:batchgrid> <template partial=head> <tr> <th>序号</th> <th>领取数量</th> <th>材料类型</th> <th>材料编码</th> <th>材料名称</th> <th>材料规格</th> <th>材料单位</th> <th>分公司</th> <th>操作部门</th> <th>领料明细操作人</th> <th>导入时间</th> </tr> </template> <template partial=body style=\\\"min-height: 100px;max-height:200px\\\"> <td>{{$index+1}}</td> <td>{{row.f_receipt_num}}</td> <td>{{row.f_batch_type}}</td> <td>{{row.f_batch_code}}</td> <td>{{row.f_batch_name}}</td> <td>{{row.f_batch_norms}}</td> <td>{{row.f_batch_company}}</td> <td>{{row.f_filiale}}</td> <td>{{row.f_parentname}}</td> <td>{{row.f_detail_operator}}</td> <td>{{row.f_batch_importdate}}</td> </template> </data-grid> </partial-view> </div> </div> \";\n\n/***/ }),\n\n/***/ 1027:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\tvar __vue_styles__ = {}\n\t__vue_script__ = __webpack_require__(395)\n\t__vue_template__ = __webpack_require__(822)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\n\tif (__vue_template__) {\n\t__vue_options__.template = __vue_template__\n\t}\n\tif (!__vue_options__.computed) __vue_options__.computed = {}\n\tObject.keys(__vue_styles__).forEach(function (key) {\n\tvar module = __vue_styles__[key]\n\t__vue_options__.computed[key] = function () { return module }\n\t})\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 84.js","<template>\r\n  <div class=\"col-sm-12 auto select-overspread\">\r\n    <div class=\"auto select-overspread\">\r\n      <div class=\"panel panel-info\">\r\n        <div class=\"panel-heading auto\">\r\n          <h3 class=\"panel-title\">材料记录展示</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"col-sm-12 span recordTable \" style=\"margin-top: 10px;min-height: 80px;max-height:200px;\">\r\n      <partial-view v-ref:single-load>\r\n        <data-grid :model=\"model\" v-ref:grid>\r\n          <template partial='head'>\r\n            <tr>\r\n              <th>序号</th>\r\n              <th>材料批次id</th>\r\n              <th>分公司</th>\r\n              <th>操作部门</th>\r\n              <th>领料批次操作人</th>\r\n              <th>导入时间</th>\r\n              <!--<th >操作</th>-->\r\n            </tr>\r\n          </template>\r\n          <template partial='body' >\r\n            <td @click=\"$parent.$parent.$parent.showdetail(row.id,$index)\">{{$index+1}}</td>\r\n            <td @click=\"$parent.$parent.$parent.showdetail(row.id,$index)\">{{row.f_batch_id}}</td>\r\n            <td @click=\"$parent.$parent.$parent.showdetail(row.id,$index)\">{{row.f_filiale}}</td>\r\n            <td @click=\"$parent.$parent.$parent.showdetail(row.id,$index)\">{{row.f_parentname}}</td>\r\n            <td @click=\"$parent.$parent.$parent.showdetail(row.id,$index)\">{{row.f_sheet_operator}}</td>\r\n            <td @click=\"$parent.$parent.$parent.showdetail(row.id,$index)\">{{row.f_batch_importdate}}</td>\r\n\r\n\r\n          </template>\r\n        </data-grid>\r\n\r\n      </partial-view>\r\n    </div>\r\n\r\n\r\n\r\n    <div class=\"col-sm-12 span recordTable \" style=\"margin-top: 10px;min-height: 100px;max-height:300px;\" v-if=\"isShowdetail\" >\r\n      <p>材料清单\r\n        <button type=\"button\" class=\"close\" @click=\"isShowdetail=false\" aria-hidden=\"true\">&times;</button>\r\n      </p>\r\n      <partial-view v-ref:single-load>\r\n        <data-grid :model=\"detailModel\"  v-ref:batchgrid>\r\n          <template partial='head'>\r\n            <tr>\r\n              <th>序号</th>\r\n              <th>领取数量</th>\r\n              <th>材料类型</th>\r\n              <th>材料编码</th>\r\n              <th>材料名称</th>\r\n              <th>材料规格</th>\r\n              <th>材料单位</th>\r\n              <th>分公司</th>\r\n              <th>操作部门</th>\r\n              <th >领料明细操作人</th>\r\n              <th >导入时间</th>\r\n            </tr>\r\n          </template>\r\n          <template partial='body'style=\"min-height: 100px;max-height:200px;\">\r\n            <td>{{$index+1}}</td>\r\n            <td>{{row.f_receipt_num}}</td>\r\n            <td>{{row.f_batch_type}}</td>\r\n            <td>{{row.f_batch_code}}</td>\r\n            <td>{{row.f_batch_name}}</td>\r\n            <td>{{row.f_batch_norms}}</td>\r\n            <td>{{row.f_batch_company}}</td>\r\n            <td>{{row.f_filiale}}</td>\r\n            <td>{{row.f_parentname}}</td>\r\n            <td>{{row.f_detail_operator}}</td>\r\n            <td>{{row.f_batch_importdate}}</td>\r\n            <!--<td><input type=\"text\"  class=\"form-control\" :placeholder=row.f_surplus_num   v-model=\"row.f_receive_num\"/></td>-->\r\n\r\n          </template>\r\n        </data-grid>\r\n\r\n      </partial-view>\r\n    </div>\r\n\r\n\r\n\r\n\r\n    <!--<div class=\"form-group col-sm-12\">\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">分公司：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_filiale\" disabled>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">操作日期：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_payfee_date\" disabled>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group col-sm-12\">\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">部门：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_payfee_department\" disabled>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">操作人：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_payfee_operator\" disabled>\r\n        </div>\r\n      </div>\r\n    </div>\r\n-->\r\n\r\n\r\n<!--    <div class=\"from-group col-sm-12\">\r\n      <center>\r\n        <button type=\"button\" @click=\"goback()\" class=\"btn btn-primary\" style=\"width:80px; margin-left:50px;\"\r\n                :disabled=\"$v.invalid\">\r\n          保存\r\n        </button>\r\n        <button type=\"button\" @click=\"reset()\" class=\"btn btn-warning\" style=\"width:80px; margin-left:50px;\">\r\n          撤销\r\n        </button>\r\n      </center>\r\n    </div>-->\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  import {HttpResetClass} from 'vue-client'\r\n  import InputAndSelect from \"vue-client/src/vue-strap/src/InputAndSelect\";\r\n\r\n  let gen = function* (self, val) {\r\n    val.f_actualfee_type = val.f_actualfee_type[0]\r\n    val.f_bill_type = val.f_bill_type[0]\r\n    yield self.$resetpost('rs/logic/saveentity', {data:{tablename:'t_apply',parameters:val}})\r\n    delete val.id\r\n    self.$resetpost('rs/logic/saveentity', {data:{tablename:'t_record',parameters:val}})\r\n      .then(() => {\r\n        self.reset()\r\n      })\r\n  }\r\n  export default {\r\n    components: {InputAndSelect},\r\n    title: '报装收费',\r\n    data() {\r\n      return {\r\n\r\n        model: {\r\n          f_payfee_operator: '',//操作人\r\n          f_payfee_department: '',//操作部门\r\n          f_filiale: '',//分公司\r\n          f_payfee_date: '',//操作日期\r\n          rows: [] // 材料批次记录\r\n        },\r\n        detailModel:{\r\n          rows:[]\r\n        },\r\n        isShowdetail:false\r\n      }\r\n    },\r\n    props: ['infee'],\r\n    ready() {\r\n      this.load() // 初始化数据\r\n      this.model.f_payfee_operator = this.$login.f.name\r\n      this.model.f_payfee_department = this.$login.f.f_parentname\r\n      this.model.f_filiale = this.$login.f.f_fengongsi\r\n      this.model.f_payfee_date = this.$login.toStandardDateString()\r\n\r\n    },\r\n    methods: {\r\n\r\n      async showdetail(val,index) {\r\n        console.log(val)\r\n        this.isShowdetail=true\r\n        let http = new HttpResetClass()\r\n\r\n        let data = {\r\n          tablename: 't_receipt_detail',\r\n          condition: `f_sheet_id = '${val}'`\r\n        }\r\n\r\n\r\n        console.log('即将获取材料明细记录数据')\r\n        let res = await http.load('POST', 'rs/sql/singleTable', {data: data}, {resolveMsg: null, rejectMsg: '获取材料明细记录数据失败'})\r\n        console.log('获取材料明细记录数据结果=>' + JSON.stringify(res.data))\r\n        // 去除付款时间的时分秒\r\n        for (var i = 0; i < res.data.length; i++) {\r\n          res.data[i].f_batch_importdate = res.data[i].f_batch_importdate.substring(0, 11)\r\n        }\r\n        this.detailModel.rows = res.data\r\n\r\n      },\r\n\r\n\r\n\r\n      goback(){\r\n        this.$dispatch('hiddenbtn')\r\n        this.showview= false\r\n      },\r\n\r\n\r\n\r\n      reset() {\r\n        this.$dispatch('close')\r\n        this.$dispatch('selfsearch')\r\n      },\r\n\r\n\r\n      // 获取数据\r\n      async load() {\r\n        let http = new HttpResetClass()\r\n\r\n\r\n\r\n\r\n        let data = {\r\n          tablename: 't_receipt_sheet',\r\n          condition: `f_apply_num = '${this.infee.f_apply_num}'`\r\n        }\r\n\r\n\r\n        console.log('即将获取材料批次记录数据')\r\n        let res = await http.load('POST', 'rs/sql/singleTable', {data: data}, {resolveMsg: null, rejectMsg: '获取材料批次记录数据失败'})\r\n        console.log('获取材料批次记录数据响应结果=>' + JSON.stringify(res.data))\r\n        // 去除付款时间的时分秒\r\n        for (var i = 0; i < res.data.length; i++) {\r\n          res.data[i].f_batch_importdate = res.data[i].f_batch_importdate.substring(0, 11)\r\n        }\r\n        this.model.rows = res.data\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// material_recording.vue?5ca38d31","module.exports = \" <div class=\\\"col-sm-12 auto select-overspread\\\"> <div class=\\\"auto select-overspread\\\"> <div class=\\\"panel panel-info\\\"> <div class=\\\"panel-heading auto\\\"> <h3 class=panel-title>材料记录展示</h3> </div> </div> </div> <div class=\\\"col-sm-12 span recordTable\\\" style=\\\"margin-top: 10px;min-height: 80px;max-height:200px\\\"> <partial-view v-ref:single-load> <data-grid :model=model v-ref:grid> <template partial=head> <tr> <th>序号</th> <th>材料批次id</th> <th>分公司</th> <th>操作部门</th> <th>领料批次操作人</th> <th>导入时间</th> </tr> </template> <template partial=body> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{$index+1}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_batch_id}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_filiale}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_parentname}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_sheet_operator}}</td> <td @click=$parent.$parent.$parent.showdetail(row.id,$index)>{{row.f_batch_importdate}}</td> </template> </data-grid> </partial-view> </div> <div class=\\\"col-sm-12 span recordTable\\\" style=\\\"margin-top: 10px;min-height: 100px;max-height:300px\\\" v-if=isShowdetail> <p>材料清单 <button type=button class=close @click=\\\"isShowdetail=false\\\" aria-hidden=true>&times;</button> </p> <partial-view v-ref:single-load> <data-grid :model=detailModel v-ref:batchgrid> <template partial=head> <tr> <th>序号</th> <th>领取数量</th> <th>材料类型</th> <th>材料编码</th> <th>材料名称</th> <th>材料规格</th> <th>材料单位</th> <th>分公司</th> <th>操作部门</th> <th>领料明细操作人</th> <th>导入时间</th> </tr> </template> <template partial=body style=\\\"min-height: 100px;max-height:200px\\\"> <td>{{$index+1}}</td> <td>{{row.f_receipt_num}}</td> <td>{{row.f_batch_type}}</td> <td>{{row.f_batch_code}}</td> <td>{{row.f_batch_name}}</td> <td>{{row.f_batch_norms}}</td> <td>{{row.f_batch_company}}</td> <td>{{row.f_filiale}}</td> <td>{{row.f_parentname}}</td> <td>{{row.f_detail_operator}}</td> <td>{{row.f_batch_importdate}}</td> </template> </data-grid> </partial-view> </div> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/product/Function/functions/material_recording.vue\n// module id = 822\n// module chunks = 84","var __vue_script__, __vue_template__\nvar __vue_styles__ = {}\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./material_recording.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../../../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./material_recording.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\nif (__vue_template__) {\n__vue_options__.template = __vue_template__\n}\nif (!__vue_options__.computed) __vue_options__.computed = {}\nObject.keys(__vue_styles__).forEach(function (key) {\nvar module = __vue_styles__[key]\n__vue_options__.computed[key] = function () { return module }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/product/Function/functions/material_recording.vue\n// module id = 1027\n// module chunks = 84"],"sourceRoot":""}