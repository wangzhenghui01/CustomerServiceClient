webpackJsonp([71],{342:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(6),d=l(o),s=a(1),i=l(s);Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},t.default={title:"报建业务通用组件",props:["data"],data:function(){return{model:{button:{button_name:null,button_index:null},f_filiale:null,f_parentname:null,f_operate_date:null,f_operator:null},data:null,showmodal:!1,disable_button:!0}},created:function(){this.initializtion()},methods:{initializtion:function(){if(console.log("进入serviceview的initializtion方法"),this.data.fields)for(var e=0;e<this.data.fields.length;e++)"datepicker"!==this.data.fields[e].type||this.data.fields[e].value||(this.data.fields[e].value=(new Date).Format("yyyy-MM-dd HH:mm:ss"));this.data.filiale?this.model.f_filiale=this.data.filiale:this.model.f_filiale=i.default.user.f_parentname,this.data.f_parentname?this.model.f_parentname=this.data.f_parentname:this.model.f_parentname=i.default.user.f_parentname,this.data.operate_date?this.model.f_operate_date=this.data.operate_date:this.model.f_operate_date=(new Date).Format("yyyy-MM-dd HH:mm:ss"),this.data.operator?this.model.f_operator=this.data.operator:this.model.f_operator=i.default.user.name},acknowledge:function(){for(var e=0;e<this.data.buttons[this.model.button.button_index].button_fields.length;e++)this.model.button.button_fields[this.data.buttons[this.model.button.button_index].button_fields[e].field]=this.data.buttons[this.model.button.button_index].button_fields[e].value;this.showmodal=!1,this.$dispatch("button",this.model)},closemodal:function(){this.showmodal=!1},clicked:function(e,t){console.log("点击了按钮index:"+e+"+button:"+(0,d.default)(t));for(var a={},l=0;l<this.data.fields.length;l++)if("checkbox"===this.data.fields[l].type)for(var o=0;o<this.data.fields[l].items.length;o++)a[this.data.fields[l].items[o].field]=this.data.fields[l].items[o].value;else a[this.data.fields[l].field]=this.data.fields[l].value;a.f_process_id=this.data.f_process_id,a.f_filiale=this.model.f_filiale,a.f_parentname=this.model.f_parentname,a.f_operator=this.model.f_operator,a.f_operate_date=this.model.f_operate_date,this.model=null,this.model=a;var s={button_fields:{}};if(s.button_name=t.button_name,s.button_index=e,t.button_fields)for(var i=0;i<t.button_fields.length;i++)s.button_fields[t.button_fields[i].field]=t.button_fields[i].value;this.model.button=s,"退回"===t.button_name?this.showmodal=!0:"下发"===t.button_name?this.showmodal=!0:this.$dispatch("button",this.model)},select_change:function(e){this.$dispatch("select_cascade",e)},disabled_check:function(e,t){if(e&&t){this.disable_button=!1;for(var a=this.data.fields,l=!1,o=0;o<a.length;o++)"checkbox"!==a[o].type&&a[o].required&&!a[o].value&&(l=!0);this.disable_button=l}}},watch:{"data.operate_date":function(){this.data.filiale?this.model.f_filiale=this.data.filiale:this.model.f_filiale=i.default.user.f_parentname,this.data.f_parentname?this.model.f_parentname=this.data.f_parentname:this.model.f_parentname=i.default.user.f_parentname,this.data.operate_date?this.model.f_operate_date=this.data.operate_date:this.model.f_operate_date=(new Date).Format("yyyy-MM-dd HH:mm:ss"),this.data.operator?this.model.f_operator=this.data.operator:this.model.f_operator=i.default.user.name},deep:!0},computed:{check_disable:function(){for(var e=this.data.fields,t=!1,a=0;a<e.length;a++)"checkbox"!==e[a].type&&e[a].required&&!e[a].value&&(t=!0);this.disable_button=t}}}},735:function(e,t){e.exports=" <div class=\"auto select-overspread\"> <div v-if=data.back_reason class=\"panel panel-info\"> <span style=\"color: red\"> 请注意被退回原因为:{{data.back_reason}}</span> </div> <validator name=v> <form class=form-horizontal> <div class=\"col-sm-11 form-group\"> <div v-for=\"(index,item) in data.fields\"> <div v-if=\"item.type==='input'\" v-show=!item.hidden :class=\"[data.fields[index].required&&!(data.fields[index].value) ? 'has-error' : '',data.fields[index].bootstraped?data.fields[index].bootstraped+' form-group':'col-sm-4 form-group']\"> <label :class=\"item.label_bootstraped?item.label_bootstraped+' control-label':'control-label col-sm-6'\">{{item.label}}：</label> <div :class=\"item.value_bootstraped?item.value_bootstraped:'col-sm-6'\"> <input class=form-control :type=item.type v-model=data.fields[index].value :placeholder=item.placeholder :value=data.fields[index].value :readonly=item.readonly :disable=item.disable @change=disabled_check(data.fields[index].required,data.fields[index].value) @blur=check_disable /> </div> </div> <div v-if=\"item.type==='datepicker'\" :class=\"[data.fields[index].required&&!(data.fields[index].value) ? 'has-error' : '',data.fields[index].bootstraped?data.fields[index].bootstraped+' form-group':'col-xs-12 form-group']\"> <label style=\"margin-top: 0.7em\" :class=\"item.label_bootstraped?item.label_bootstraped + '':'col-xs-12'\">{{item.label}}：</label> <div :class=\"item.value_bootstraped?item.value_bootstraped:'col-xs-12'\"> <datepicker :placeholder=item.placeholder :value.sync=data.fields[index].value :format=\"'yyyy-MM-dd HH:mm:ss'\" v-model=data.fields[index].value :readonly=item.readonly :disabled=item.disabled @blur=check_disable :show-reset-button=reset> </datepicker> </div> </div> <div v-if=\"item.type==='textarea'\" :class=\"[data.fields[index].required&&!(data.fields[index].value) ? 'has-error' : '',data.fields[index].bootstraped?data.fields[index].bootstraped+' form-group':'col-sm-12 form-group']\"> <label :class=\"item.label_bootstraped?item.label_bootstraped+' control-label':'control-label col-sm-2'\">{{item.label}}：</label> <div :class=\"item.value_bootstraped?item.value_bootstraped:'col-sm-10'\"> <textarea :readonly=item.readonly :disabled=item.disabled class=form-control :rows=item.rows v-model=data.fields[index].value @change=disabled_check(data.fields[index].required,data.fields[index].value) @blur=check_disable>\n              </textarea> </div> </div> <div v-if=\"item.type==='radio'\" :class=\"[data.fields[index].required&&!(data.fields[index].value) ? 'has-error' : '',data.fields[index].bootstraped?data.fields[index].bootstraped+' form-group':'col-sm-12 form-group']\"> <label v-if=item.label :class=\"item.label_bootstraped?item.label_bootstraped+' control-label':'control-label col-sm-2'\">{{item.label}}：</label> <div class=col-xs-12> <div :class=\"item.value_bootstraped?item.value_bootstraped:item.items.length%2 == 0?'col-xs-5': 'col-xs-3'\" v-for=\"(index2,row) in item.items\"> <label style=\"margin-top: 0.7em\" for=row.label :class=\"item.items.length%2 == 0?'col-xs-4': 'col-xs-2'\">{{row.label}}</label> <input @blur=check_disable :class=\"item.items.length%2 == 0?'col-xs-1': 'col-xs-1'\" :readonly=item.readonly :disabled=item.disabled style=\"margin-top: 10px\" type=radio :name=index :id=row.label v-bind:value=data.fields[index].items[index2].value v-model=data.fields[index].value> </div> </div> </div> <div v-if=\"item.type==='select'\" :class=\"[data.fields[index].required&&!(data.fields[index].value) ? 'has-error' : '',data.fields[index].bootstraped?data.fields[index].bootstraped+' form-group':'col-sm-4 form-group']\"> <label :class=\"item.label_bootstraped?item.label_bootstraped+' control-label':'control-label col-sm-6'\">{{item.label}}：</label> <input-select :class=\"item.value_bootstraped?item.value_bootstraped:'col-sm-6'\" @blur=check_disable @change=select_change(index),disabled_check(data.fields[index].required,data.fields[index].value) :readonly=item.readonly :disable=item.disabled :value.sync=data.fields[index].value v-model=data.fields[index].value :options=item.options :valuesingle=true></input-select> </div> <div v-if=\"item.type==='checkbox'\" :class=\"[data.fields[index].required&&!(data.fields[index].value) ? 'has-error' : '',data.fields[index].bootstraped?data.fields[index].bootstraped+' form-group':'col-sm-12 form-group']\"> <label v-if=item.label :class=\"item.label_bootstraped?item.label_bootstraped+' control-label':'control-label col-sm-2'\">{{item.label}}：</label> <div style=\"margin-top: 0.7em\" :class=\"item.value_bootstraped?item.value_bootstraped:'control-label col-sm-2'\" v-for=\"(index2,row) in item.items\"> <label class=\"font-size form-group col-sm-6\">{{row.label}}</label> <input :readonly=item.readonly :disabled=item.disabled type=checkbox class=col-sm-6 :id=row.label v-model=data.fields[index].items[index2].value> </div> </div> </div> </div> <div class=\"col-sm-11 form-group\"> <div class=\"form-group col-sm-6\"> <label class=\"col-sm-4 control-label\">分公司：</label> <div class=col-sm-5> <input class=form-control type=text v-model=model.f_filiale disabled=disabled> </div> </div> <div class=\"col-sm-6 form-group\"> <label class=\"control-label col-sm-6\">部门：</label> <div class=col-sm-5> <input type=text class=form-control disabled=disabled v-model=model.f_parentname /> </div> </div> </div> <div class=\"col-sm-11 form-group\"> <div class=\"col-sm-6 form-group\"> <label class=\"control-label col-sm-4\">操作日期：</label> <div class=col-sm-5> <input type=text class=form-control disabled=disabled v-model=model.f_operate_date /> </div> </div> <div class=\"col-sm-6 form-group\"> <label class=\"control-label col-sm-6\">操作人：</label> <div class=col-sm-5> <input type=text class=form-control disabled=disabled v-model=model.f_operator /> </div> </div> </div> </form> </validator> <div class=\"from-group col-xs-12\"> <center> <div v-for=\"(index,button) in data.buttons\" :class=\"[data.buttons.length==4?'col-xs-3':'',data.buttons.length==3?'col-xs-4':'',data.buttons.length==2?'col-xs-6':'']\"> <button :disabled=\"(button.button_name==='提交'||button.button_name==='下发')&&disable_button\" type=button @click=clicked(index,button) style=border-radius:5px :class=\"[(button.button_name==='提交'||button.button_name==='下发')&&disable_button?'btn btn-default':'btn btn-primary',data.buttons.length==4 ? 'col-xs-2 col-xs-offset-1':'',data.buttons.length==3 ? 'col-xs-2 col-xs-offset-2':'',data.buttons.length==2 ? 'col-xs-4 col-xs-offset-2':'']\"> {{button.button_name}} </button> </div> </center> </div> <modal v-if=showmodal :show.sync=showmodal v-ref:modal backdrop=false> <header slot=modal-header class=modal-header> <button type=button class=close @click=closemodal><span>&times;</span></button> <h4 class=modal-title>{{model.button.button_name}}</h4> </header> <article slot=modal-body class=modal-body> <div class=col-sm-12 v-for=\"(index,button_field) in data.buttons[model.button.button_index].button_fields\"> <label class=\"control-label col-sm-3\" style=\"margin-top: 10px\">{{button_field.label}}：</label> <div class=col-sm-7> <input-select v-if=\"button_field.type=='select'\" :value.sync=data.buttons[model.button.button_index].button_fields[index].value v-model=data.buttons[model.button.button_index].button_fields[index].value :options=button_field.options></input-select> <input v-else type=text class=form-control v-model=data.buttons[model.button.button_index].button_fields[index].value /> </div> </div> </article> <footer slot=modal-footer style=border-top:none class=modal-footer> <button v-show=showmodal type=button class=\"btn btn-primary\" @click=acknowledge>确认</button> </footer> </modal> </div> "},893:function(e,t,a){var l,o,d={};l=a(342),o=a(735),e.exports=l||{},e.exports.__esModule&&(e.exports=e.exports.default);var s="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(s.template=o),s.computed||(s.computed={}),Object.keys(d).forEach(function(e){var t=d[e];s.computed[e]=function(){return t}})}});
//# sourceMappingURL=71.js.map