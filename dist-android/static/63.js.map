{"version":3,"sources":["webpack:///63.js","webpack:///InstallFee.vue","webpack:///./src/components/product/Function/functions/InstallFee.vue?2d45","webpack:///./src/components/product/Function/functions/InstallFee.vue"],"names":["webpackJsonp","368","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_asyncToGenerator2","_asyncToGenerator3","_regenerator","_regenerator2","_vueClient","_InputAndSelect","_InputAndSelect2","mark","gen","self","val","wrap","_context","prev","next","f_actualfee_type","f_bill_type","$resetpost","data","tablename","parameters","id","then","reset","stop","this","components","InputAndSelect","title","showpay","addItem","model","subcost","f_total_cost","f_payfee_operator","f_payfee_department","f_filiale","f_payfee_date","f_total_fee","rows","props","ready","load","$login","f","name","f_parentname","f_fengongsi","toStandardDateString","methods","check","re","test","f_fee","$showMessage","change","f_payfee_remarks","infee","f_account_cost","f_construction_cost","f_material_cost","f_labor_cost","f_change_pipeline_cost","f_sbaz_cost","smalltoBIG","n","fraction","digit","unit","head","Math","abs","s","i","length","floor","pow","replace","p","j","add","close","confirm","_ref","apply","arguments","_callee","flag","http","_this","_context2","abrupt","HttpResetClass","f_payfee_way","processid","f_process_id","applyid","f_apply_num","f_operator","f_department","Number","f_charging_item","f_pay_number","push","resolveMsg","rejectMsg","res","_ref2","_callee2","_context3","columnname","condition","sent","f_contract_money","f_payfeedate","substring","computed","getCapital","f_capital","temp","temp2","round","f_jmhj_cost","aaa","f_actualfee","feeoptions","$appdata","getParam","dayin","jiaofei","744","919","__vue_script__","__vue_template__","__vue_styles__","__vue_options__","options","template","keys","forEach","key"],"mappings":"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","file":"63.js","sourcesContent":["webpackJsonp([63],{\n\n/***/ 368:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _asyncToGenerator2 = __webpack_require__(7);\n\t\n\tvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\t\n\tvar _regenerator = __webpack_require__(2);\n\t\n\tvar _regenerator2 = _interopRequireDefault(_regenerator);\n\t\n\tvar _vueClient = __webpack_require__(3);\n\t\n\tvar _InputAndSelect = __webpack_require__(129);\n\t\n\tvar _InputAndSelect2 = _interopRequireDefault(_InputAndSelect);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar gen = _regenerator2.default.mark(function gen(self, val) {\n\t  return _regenerator2.default.wrap(function gen$(_context) {\n\t    while (1) {\n\t      switch (_context.prev = _context.next) {\n\t        case 0:\n\t          val.f_actualfee_type = val.f_actualfee_type[0];\n\t          val.f_bill_type = val.f_bill_type[0];\n\t          _context.next = 4;\n\t          return self.$resetpost('rs/logic/saveentity', { data: { tablename: 't_apply', parameters: val } });\n\t\n\t        case 4:\n\t          delete val.id;\n\t          self.$resetpost('rs/logic/saveentity', { data: { tablename: 't_record', parameters: val } }).then(function () {\n\t            self.reset();\n\t          });\n\t\n\t        case 6:\n\t        case 'end':\n\t          return _context.stop();\n\t      }\n\t    }\n\t  }, gen, this);\n\t});\n\texports.default = {\n\t  components: { InputAndSelect: _InputAndSelect2.default },\n\t  title: '报装收费',\n\t  data: function data() {\n\t    return {\n\t      showpay: false,\n\t      addItem: null,\n\t      model: {\n\t        subcost: 0,\n\t        f_total_cost: 0,\n\t        f_payfee_operator: '',\n\t        f_payfee_department: '',\n\t        f_filiale: '',\n\t        f_payfee_date: '',\n\t        f_total_fee: '',\n\t        rows: [] }\n\t    };\n\t  },\n\t\n\t  props: ['infee'],\n\t  ready: function ready() {\n\t    this.load();\n\t    this.model.f_payfee_operator = this.$login.f.name;\n\t    this.model.f_payfee_department = this.$login.f.f_parentname;\n\t    this.model.f_filiale = this.$login.f.f_fengongsi;\n\t    this.model.f_payfee_date = this.$login.toStandardDateString();\n\t  },\n\t\n\t  methods: {\n\t    check: function check() {\n\t      var re = /^[+-]?\\d+(\\.\\d+)?$/;\n\t      if (!re.test(this.addItem.f_fee)) {\n\t        this.$showMessage(\"请输入数字\");\n\t        this.addItem.f_fee = '';\n\t        return false;\n\t      }\n\t      return true;\n\t    },\n\t    change: function change() {\n\t      if (this.addItem.f_payfee_remarks === '开户费') {\n\t        this.addItem.f_fee = this.infee.f_account_cost ? this.infee.f_account_cost : 0;\n\t      }\n\t      if (this.addItem.f_payfee_remarks === '入户安装费') {\n\t        this.addItem.f_fee = this.infee.f_construction_cost ? this.infee.f_construction_cost : 0;\n\t      }\n\t      if (this.addItem.f_payfee_remarks === '材料费') {\n\t        this.addItem.f_fee = this.infee.f_material_cost ? this.infee.f_material_cost : 0;\n\t      }\n\t      if (this.addItem.f_payfee_remarks === '人工费') {\n\t        this.addItem.f_fee = this.infee.f_labor_cost ? this.infee.f_labor_cost : 0;\n\t      }\n\t      if (this.addItem.f_payfee_remarks === '改管费') {\n\t        this.addItem.f_fee = this.infee.f_change_pipeline_cost ? this.infee.f_change_pipeline_cost : 0;\n\t      }\n\t      if (this.addItem.f_payfee_remarks === '设备安装费') {\n\t        this.addItem.f_fee = this.infee.f_sbaz_cost ? this.infee.f_sbaz_cost : 0;\n\t      }\n\t    },\n\t    smalltoBIG: function smalltoBIG(n) {\n\t      var fraction = ['角', '分'];\n\t      var digit = ['零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖'];\n\t      var unit = [['元', '万', '亿'], ['', '拾', '佰', '仟']];\n\t      var head = n < 0 ? '欠' : '';\n\t      n = Math.abs(n);\n\t\n\t      var s = '';\n\t\n\t      for (var i = 0; i < fraction.length; i++) {\n\t        s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');\n\t      }\n\t      s = s || '整';\n\t      n = Math.floor(n);\n\t\n\t      for (var i = 0; i < unit[0].length && n > 0; i++) {\n\t        var p = '';\n\t        for (var j = 0; j < unit[1].length && n > 0; j++) {\n\t          p = digit[n % 10] + unit[1][j] + p;\n\t          n = Math.floor(n / 10);\n\t        }\n\t        s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;\n\t      }\n\t      return head + s.replace(/(零.)*零元/, '元').replace(/(零.)+/g, '零').replace(/^整$/, '零元整');\n\t    },\n\t    add: function add() {\n\t      this.addItem = null;\n\t      this.showpay = true;\n\t    },\n\t    close: function close() {\n\t      this.showpay = false;\n\t      this.addItem = null;\n\t    },\n\t    confirm: function () {\n\t      var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {\n\t        var _this = this;\n\t\n\t        var flag, http, data;\n\t        return _regenerator2.default.wrap(function _callee$(_context2) {\n\t          while (1) {\n\t            switch (_context2.prev = _context2.next) {\n\t              case 0:\n\t                flag = this.check();\n\t\n\t                if (flag) {\n\t                  _context2.next = 3;\n\t                  break;\n\t                }\n\t\n\t                return _context2.abrupt('return');\n\t\n\t              case 3:\n\t                http = new _vueClient.HttpResetClass();\n\t\n\t                if (!(this.addItem.f_payfee_way && this.addItem.f_fee)) {\n\t                  _context2.next = 18;\n\t                  break;\n\t                }\n\t\n\t                this.addItem.f_payfee_way = this.addItem.f_payfee_way == '[]' ? '' : this.addItem.f_payfee_way[0];\n\t                this.addItem.processid = this.infee.f_process_id;\n\t                this.addItem.applyid = this.infee.f_apply_num;\n\t                this.addItem.f_operator = this.$login.f.name;\n\t                this.addItem.f_department = this.$login.f.f_parentname;\n\t                this.addItem.f_filiale = this.$login.f.f_fengongsi;\n\t                this.addItem.f_fee = Number(this.addItem.f_fee);\n\t                this.addItem.f_charging_item = '';\n\t                this.addItem.f_pay_number = '';\n\t                this.model.rows.push(this.addItem);\n\t                data = {\n\t                  tablename: 't_paydetail',\n\t                  parameters: this.addItem\n\t                };\n\t                _context2.next = 18;\n\t                return http.load('POST', 'rs/logic/saveentity', { data: data }, { resolveMsg: null, rejectMsg: \"添加失败\" }).then(function (res) {\n\t                  _this.close();\n\t                });\n\t\n\t              case 18:\n\t              case 'end':\n\t                return _context2.stop();\n\t            }\n\t          }\n\t        }, _callee, this);\n\t      }));\n\t\n\t      function confirm() {\n\t        return _ref.apply(this, arguments);\n\t      }\n\t\n\t      return confirm;\n\t    }(),\n\t    load: function () {\n\t      var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {\n\t        var http, data, res, i;\n\t        return _regenerator2.default.wrap(function _callee2$(_context3) {\n\t          while (1) {\n\t            switch (_context3.prev = _context3.next) {\n\t              case 0:\n\t                http = new _vueClient.HttpResetClass();\n\t                data = {\n\t                  columnname: 'f_contract_money',\n\t                  tablename: 't_contract',\n\t                  condition: 'processid = \\'' + this.infee.f_process_id + '\\''\n\t                };\n\t                _context3.next = 4;\n\t                return http.load('POST', 'rs/sql/getSum', { data: data }, { resolveMsg: null, rejectMsg: '获取总金额失败' });\n\t\n\t              case 4:\n\t                res = _context3.sent;\n\t\n\t                this.model.f_total_cost = res.data[0].f_contract_money;\n\t                data = {\n\t                  tablename: 't_paydetail',\n\t                  condition: 'processid = \\'' + this.infee.f_process_id + '\\''\n\t                };\n\t\n\t                _context3.next = 9;\n\t                return http.load('POST', 'rs/sql/singleTable', { data: data }, { resolveMsg: null, rejectMsg: '获取付款数据失败' });\n\t\n\t              case 9:\n\t                res = _context3.sent;\n\t\n\t                for (i = 0; i < res.data.length; i++) {\n\t                  res.data[i].f_payfeedate = res.data[i].f_payfeedate.substring(0, 11);\n\t                }\n\t                this.model.rows = res.data;\n\t\n\t              case 12:\n\t              case 'end':\n\t                return _context3.stop();\n\t            }\n\t          }\n\t        }, _callee2, this);\n\t      }));\n\t\n\t      function load() {\n\t        return _ref2.apply(this, arguments);\n\t      }\n\t\n\t      return load;\n\t    }()\n\t  },\n\t  computed: {\n\t    getCapital: function getCapital() {\n\t      if (this.addItem.f_fee) {\n\t        this.addItem.f_capital = this.smalltoBIG(Number(this.addItem.f_fee));\n\t      }\n\t      return this.addItem.f_capital;\n\t    },\n\t    subcost: function subcost() {\n\t      var temp = Number(this.model.f_total_cost);\n\t      var temp2 = 0;\n\t      for (var i = 0; i < this.model.rows.length; i++) {\n\t        temp2 += Number(this.model.rows[i].f_fee);\n\t      }\n\t      this.model.f_total_fee = Math.round(temp2 * 100) / 100;\n\t      this.model.subcost = Math.round((temp - temp2) * 100) / 100;\n\t      if (this.model.f_total_fee && this.model.f_jmhj_cost) {\n\t        temp = Math.round((temp - Number(this.model.f_jmhj_cost)) * 100) / 100;\n\t      }\n\t      this.model.subcost = Math.round((temp - temp2) * 100) / 100;\n\t      return this.model.subcost;\n\t    },\n\t    aaa: function aaa() {\n\t      this.model.f_jmhj_cost = Number(this.model.f_total_cost) - Number(this.model.f_actualfee);\n\t      return this.model.f_jmhj_cost;\n\t    },\n\t    feeoptions: function feeoptions() {\n\t      return this.$appdata.getParam('费用类型');\n\t    },\n\t    dayin: function dayin() {\n\t      return this.$appdata.getParam('打印格式');\n\t    },\n\t    jiaofei: function jiaofei() {\n\t      return this.$appdata.getParam('缴费类型');\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 744:\n/***/ (function(module, exports) {\n\n\tmodule.exports = \" <div class=\\\"col-sm-12 auto select-overspread\\\"> <div class=\\\"auto select-overspread\\\"> <div class=\\\"panel panel-info\\\"> <div class=\\\"panel-heading auto\\\"> <h3 class=panel-title>报装收费</h3> </div> </div> </div> <div class=col-sm-12> <span class=col-sm-3 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\\\">合同编号:{{infee.f_contract_number}}</span> <span class=col-sm-2 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\\\">合同总金额:{{model.f_total_cost}}元</span> <span class=col-sm-2 v-show=model.f_jmhj_cost>优惠金额:{{model.f_jmhj_cost}}元</span> <span class=col-sm-2 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹'))\\\">累计缴费金额:{{model.f_total_fee}}元</span> <span class=col-sm-2 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\\\">未结:{{subcost}}元</span> <button type=button class=\\\"btn btn-warning col-sm-2\\\" @click=add()>新增收费</button> </div> <div class=col-sm-12 style=\\\"height: auto\\\"> <div class=\\\"form-inline auto\\\" style=\\\"margin-bottom: 5px\\\"> </div> <div class=\\\"col-sm-12 span recordTable\\\" style=\\\"margin-top: 10px;min-height: 500px\\\"> <partial-view v-ref:single-load> <data-grid :model=model v-ref:grid> <template partial=head> <tr> <th>序号</th> <th>金额(元)</th> <th>金额大写</th> <th>缴费类型</th> <th>收费人员</th> <th>日期</th> <th>备注</th> </tr> </template> <template partial=body> <td style=\\\"text-align: center\\\">{{$index+1}}</td> <td style=\\\"text-align: center\\\">{{row.f_fee}}</td> <td style=\\\"text-align: center\\\">{{row.f_capital}}</td> <td style=\\\"text-align: center\\\">{{row.f_payfee_way}}</td> <td style=\\\"text-align: center\\\">{{row.f_operator}}</td> <td style=\\\"text-align: center\\\">{{row.f_payfeedate}}</td> <td style=\\\"text-align: center\\\">{{row.f_payfee_remarks}}</td> </template> </data-grid> </partial-view> </div> </div> <div class=\\\"form-group col-sm-12\\\"> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">分公司：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_filiale disabled=disabled> </div> </div> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">操作日期：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_payfee_date disabled=disabled> </div> </div> </div> <div class=\\\"form-group col-sm-12\\\"> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">部门：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_payfee_department disabled=disabled> </div> </div> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">操作人：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_payfee_operator disabled=disabled> </div> </div> </div> <modal :show.sync=showpay v-ref:modal backdrop=false> <header slot=modal-header class=modal-header> <button type=button class=close @click=close><span>&times;</span></button> <h4 class=modal-title>新增收费</h4> </header> <article slot=modal-body class=modal-body> <div v-if=showpay> <div class=from-group> <label>金额(元)</label> <input type=text class=form-control v-model=addItem.f_fee @blur=check()> </div> <div class=from-group> <label>金额大写</label> <input type=text class=form-control v-model=getCapital readonly=readonly> </div> <div class=from-group> <label>缴费类型</label> <v-select :options=jiaofei v-model=addItem.f_payfee_way :value.sync=addItem.f_payfee_way close-on-select> </v-select> </div> <div class=from-group> <label>交费日期</label> <div> <datepicker width=600.76px; :value.sync=addItem.f_payfeedate :format=\\\"'yyyy-MM-dd'\\\" v-model=addItem.f_payfeedate readonly=readonly :show-reset-button=reset> </datepicker> </div> </div> <div class=from-group> <label>备注</label> <input-select :value.sync=addItem.f_payfee_remarks v-model=addItem.f_payfee_remarks :options=feeoptions @change=change close-on-select></input-select> </div> </div> </article> <footer slot=modal-footer class=modal-footer> <button v-show=showpay type=button class=\\\"btn btn-default\\\" @click=close>取消</button> <button v-show=showpay type=button class=\\\"btn btn-success\\\" @click=confirm>确认</button> </footer> </modal> </div> \";\n\n/***/ }),\n\n/***/ 919:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\tvar __vue_styles__ = {}\n\t__vue_script__ = __webpack_require__(368)\n\t__vue_template__ = __webpack_require__(744)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\n\tif (__vue_template__) {\n\t__vue_options__.template = __vue_template__\n\t}\n\tif (!__vue_options__.computed) __vue_options__.computed = {}\n\tObject.keys(__vue_styles__).forEach(function (key) {\n\tvar module = __vue_styles__[key]\n\t__vue_options__.computed[key] = function () { return module }\n\t})\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 63.js","<template>\r\n  <div class=\"col-sm-12 auto select-overspread\">\r\n    <div class=\"auto select-overspread\">\r\n      <div class=\"panel panel-info\">\r\n        <div class=\"panel-heading auto\">\r\n          <h3 class=\"panel-title\">报装收费</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-sm-12\" >\r\n      <span class=\"col-sm-3\" v-show=\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\">合同编号:{{infee.f_contract_number}}</span>\r\n      <span class=\"col-sm-2\" v-show=\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\">合同总金额:{{model.f_total_cost}}元</span>\r\n      <span class=\"col-sm-2\" v-show=\"model.f_jmhj_cost\">优惠金额:{{model.f_jmhj_cost}}元</span>\r\n      <span class=\"col-sm-2\" v-show=\"!($login.f.f_fengongsi.includes('彩虹'))\">累计缴费金额:{{model.f_total_fee}}元</span>\r\n      <span class=\"col-sm-2\" v-show=\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\">未结:{{subcost}}元</span>\r\n      <button type=\"button\" class=\"btn btn-warning col-sm-2\" @click=\"add()\">新增收费</button>\r\n    </div>\r\n    <div class=\"col-sm-12\" style=\"height: auto\">\r\n      <div class=\"form-inline auto\" style=\"margin-bottom: 5px;\">\r\n      </div>\r\n      <div class=\"col-sm-12 span recordTable\" style=\"margin-top: 10px;min-height: 500px\">\r\n        <partial-view v-ref:single-load>\r\n          <data-grid :model=\"model\" v-ref:grid>\r\n            <template partial='head'>\r\n              <tr>\r\n                <th>序号</th>\r\n                <th>金额(元)</th>\r\n                <th>金额大写</th>\r\n                <th>缴费类型</th>\r\n                <th>收费人员</th>\r\n                <th>日期</th>\r\n                <th>备注</th>\r\n                <!--<th>操作</th>-->\r\n              </tr>\r\n            </template>\r\n            <template partial='body'>\r\n              <td style=\"text-align: center\">{{$index+1}}</td>\r\n              <td style=\"text-align: center\">{{row.f_fee}}</td>\r\n              <td style=\"text-align: center\">{{row.f_capital}}</td>\r\n              <td style=\"text-align: center\">{{row.f_payfee_way}}</td>\r\n              <td style=\"text-align: center\">{{row.f_operator}}</td>\r\n              <td style=\"text-align: center\">{{row.f_payfeedate}}</td>\r\n              <td style=\"text-align: center\">{{row.f_payfee_remarks}}</td>\r\n              <!--<td class=\"flex-around\">-->\r\n              <!--&lt;!&ndash;<button type=\"button\" name=\"button\" class=\"btn btn-link\"&ndash;&gt;-->\r\n              <!--&lt;!&ndash;@click.stop=\"$parent.$parent.$parent.modifyParam(row,'修改')\">修改&ndash;&gt;-->\r\n              <!--&lt;!&ndash;</button>&ndash;&gt;-->\r\n              <!--<button type=\"button\" name=\"button\" class=\"btn btn-link\"-->\r\n              <!--@click.stop=\"$parent.$parent.$parent.deleteItem(row)\">删除-->\r\n              <!--</button>-->\r\n              <!--</td>-->\r\n            </template>\r\n          </data-grid>\r\n        </partial-view>\r\n      </div>\r\n    </div>\r\n\r\n    <!--<div class=\"form-group col-sm-12\">-->\r\n    <!--<div class=\"col-sm-2\">-->\r\n    <!--<label class=\"control-label col-sm-12\">收费备注：</label>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"col-sm-10\">-->\r\n    <!--<textarea class=\"form-control\" rows=\"3\" v-model=\"model.f_payfee_remarks\"></textarea>-->\r\n    <!--</div>-->\r\n    <!--</div>-->\r\n    <div class=\"form-group col-sm-12\">\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">分公司：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_filiale\" disabled>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">操作日期：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_payfee_date\" disabled>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group col-sm-12\">\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">部门：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_payfee_department\" disabled>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-6\">\r\n        <label class=\"control-label col-sm-4\">操作人：</label>\r\n        <div class=\"col-sm-8\">\r\n          <input class=\"form-control\" type=\"text\" v-model=\"model.f_payfee_operator\" disabled>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--<div class=\"from-group col-sm-12\">-->\r\n      <!--<center>-->\r\n        <!--<button type=\"button\" @click=\"confirm()\" class=\"btn btn-primary\" style=\"width:80px; margin-left:50px;\"-->\r\n                <!--:disabled=\"$v.invalid\">-->\r\n          <!--保存-->\r\n        <!--</button>-->\r\n        <!--<button type=\"button\" @click=\"reset()\" class=\"btn btn-warning\" style=\"width:80px; margin-left:50px;\">-->\r\n          <!--撤销-->\r\n        <!--</button>-->\r\n      <!--</center>-->\r\n    <!--</div>-->\r\n    <modal :show.sync=\"showpay\" v-ref:modal backdrop=\"false\">\r\n      <header slot=\"modal-header\" class=\"modal-header\">\r\n        <button type=\"button\" class=\"close\" @click=\"close\"><span>&times;</span></button>\r\n        <h4 class=\"modal-title\">新增收费</h4>\r\n      </header>\r\n      <article slot=\"modal-body\" class=\"modal-body\">\r\n        <div v-if=\"showpay\">\r\n          <div class=\"from-group\">\r\n            <label>金额(元)</label>\r\n            <input type=\"text\" class=\"form-control\" v-model=\"addItem.f_fee\" @blur=\"check()\">\r\n          </div>\r\n          <div class=\"from-group\">\r\n            <label>金额大写</label>\r\n            <input type=\"text\" class=\"form-control\" v-model=\"getCapital\" readonly>\r\n          </div>\r\n          <div class=\"from-group\">\r\n            <label>缴费类型</label>\r\n            <v-select :options=\"jiaofei\"\r\n                       v-model=\"addItem.f_payfee_way\"\r\n                      :value.sync=\"addItem.f_payfee_way\" close-on-select>\r\n            </v-select>\r\n          </div>\r\n          <div class=\"from-group\">\r\n            <label>交费日期</label>\r\n            <div>\r\n              <datepicker width=\"600.76px;\"\r\n                          :value.sync=\"addItem.f_payfeedate\"\r\n                          :format=\"'yyyy-MM-dd'\"\r\n                          v-model=\"addItem.f_payfeedate\" readonly=\"readonly\"\r\n                          :show-reset-button=\"reset\">\r\n              </datepicker>\r\n            </div>\r\n          </div>\r\n          <div class=\"from-group\">\r\n            <label>备注</label>\r\n            <input-select :value.sync=\"addItem.f_payfee_remarks\" v-model=\"addItem.f_payfee_remarks\"\r\n                          :options='feeoptions' @change=\"change\" close-on-select></input-select>\r\n          </div>\r\n        </div>\r\n      </article>\r\n      <footer slot=\"modal-footer\" class=\"modal-footer\">\r\n        <button v-show=\"showpay\" type=\"button\" class=\"btn btn-default\" @click='close'>取消</button>\r\n        <button v-show=\"showpay\" type=\"button\" class=\"btn btn-success\" @click='confirm'>确认</button>\r\n      </footer>\r\n    </modal>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {HttpResetClass} from 'vue-client'\r\n  import InputAndSelect from \"vue-client/src/vue-strap/src/InputAndSelect\";\r\n\r\n  let gen = function* (self, val) {\r\n    val.f_actualfee_type = val.f_actualfee_type[0]\r\n    val.f_bill_type = val.f_bill_type[0]\r\n    yield self.$resetpost('rs/logic/saveentity', {data:{tablename:'t_apply',parameters:val}})\r\n    delete val.id\r\n    self.$resetpost('rs/logic/saveentity', {data:{tablename:'t_record',parameters:val}})\r\n      .then(() => {\r\n        self.reset()\r\n      })\r\n  }\r\n  export default {\r\n    components: {InputAndSelect},\r\n    title: '报装收费',\r\n    data() {\r\n      return {\r\n        showpay: false, // 新增收费模态框开关\r\n        addItem: null, // 模态框数据\r\n        model: {\r\n          subcost: 0, // 剩余付款\r\n          f_total_cost: 0, // 总费用\r\n          f_payfee_operator: '',\r\n          f_payfee_department: '',\r\n          f_filiale: '',\r\n          f_payfee_date: '',\r\n          f_total_fee: '',\r\n          rows: [] // 付费数据数组\r\n        }\r\n      }\r\n    },\r\n    props: ['infee'],\r\n    ready() {\r\n      this.load() // 初始化数据\r\n      this.model.f_payfee_operator = this.$login.f.name\r\n      this.model.f_payfee_department = this.$login.f.f_parentname\r\n      this.model.f_filiale = this.$login.f.f_fengongsi\r\n      this.model.f_payfee_date = this.$login.toStandardDateString()\r\n      // this.infee.f_actualfee_type = [this.infee.f_actualfee_type ? this.infee.f_actualfee_type : '']\r\n      // this.infee.f_bill_type = [this.infee.f_bill_type ? this.infee.f_bill_type : '']\r\n      // this.model = Object.assign({}, this.model, this.infee)\r\n      // this.model.f_actualfee = '0'\r\n      // this.model.f_actualfee_type = '现金缴费'\r\n      // delete this.model.id\r\n    },\r\n    methods: {\r\n      // 输入金额校验\r\n      check(){\r\n          let re = /^[+-]?\\d+(\\.\\d+)?$/  //判断字符串是否为数字\r\n          if (!re.test(this.addItem.f_fee)){\r\n            this.$showMessage(\"请输入数字\")\r\n            this.addItem.f_fee=''\r\n            return false\r\n          }\r\n          return true\r\n      },\r\n      change() {\r\n        // 解决模态框数据不刷新的问题\r\n        if (this.addItem.f_payfee_remarks === '开户费') {\r\n          this.addItem.f_fee = this.infee.f_account_cost ? this.infee.f_account_cost : 0\r\n        }\r\n        if (this.addItem.f_payfee_remarks === '入户安装费') {\r\n          this.addItem.f_fee = this.infee.f_construction_cost ? this.infee.f_construction_cost : 0\r\n        }\r\n        if (this.addItem.f_payfee_remarks === '材料费') {\r\n          this.addItem.f_fee = this.infee.f_material_cost ? this.infee.f_material_cost : 0\r\n        }\r\n        if (this.addItem.f_payfee_remarks === '人工费') {\r\n          this.addItem.f_fee = this.infee.f_labor_cost ? this.infee.f_labor_cost : 0\r\n        }\r\n        if (this.addItem.f_payfee_remarks === '改管费') {\r\n          this.addItem.f_fee = this.infee.f_change_pipeline_cost ? this.infee.f_change_pipeline_cost : 0\r\n        }\r\n        if (this.addItem.f_payfee_remarks === '设备安装费') {\r\n          this.addItem.f_fee = this.infee.f_sbaz_cost ? this.infee.f_sbaz_cost : 0\r\n        }\r\n      },\r\n      // 小写转换大写\r\n      smalltoBIG(n) {\r\n        let fraction = ['角', '分'];\r\n        let digit = ['零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖'];\r\n        let unit = [['元', '万', '亿'], ['', '拾', '佰', '仟']];\r\n        let head = n < 0 ? '欠' : '';\r\n        n = Math.abs(n);\r\n\r\n        let s = '';\r\n\r\n        for (var i = 0; i < fraction.length; i++) {\r\n          s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');\r\n        }\r\n        s = s || '整';\r\n        n = Math.floor(n);\r\n\r\n        for (var i = 0; i < unit[0].length && n > 0; i++) {\r\n          let p = '';\r\n          for (var j = 0; j < unit[1].length && n > 0; j++) {\r\n            p = digit[n % 10] + unit[1][j] + p;\r\n            n = Math.floor(n / 10);\r\n          }\r\n          s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;\r\n        }\r\n        return head + s.replace(/(零.)*零元/, '元').replace(/(零.)+/g, '零').replace(/^整$/, '零元整')\r\n      },\r\n      //新增收费 开启模态框\r\n      add() {\r\n        this.addItem = null\r\n        this.showpay = true\r\n      },\r\n      // 关闭模态框\r\n      close() {\r\n        this.showpay = false\r\n        this.addItem = null\r\n      },\r\n      // 模态框确定按钮保存数据\r\n      async confirm() {\r\n        let flag = this.check()\r\n        if(!flag){\r\n          return\r\n        }\r\n        let http = new HttpResetClass()\r\n        if(this.addItem.f_payfee_way&&this.addItem.f_fee){\r\n        this.addItem.f_payfee_way = this.addItem.f_payfee_way == '[]'?'': this.addItem.f_payfee_way[0]\r\n        this.addItem.processid = this.infee.f_process_id\r\n        this.addItem.applyid = this.infee.f_apply_num\r\n        this.addItem.f_operator = this.$login.f.name\r\n        this.addItem.f_department = this.$login.f.f_parentname\r\n        this.addItem.f_filiale = this.$login.f.f_fengongsi\r\n        this.addItem.f_fee = Number(this.addItem.f_fee)\r\n        this.addItem.f_charging_item = ''\r\n        this.addItem.f_pay_number = ''\r\n        this.model.rows.push(this.addItem)\r\n        let data = {\r\n          tablename: 't_paydetail',\r\n          parameters: this.addItem\r\n        }\r\n        await http.load('POST', 'rs/logic/saveentity', {data:data}, {resolveMsg: null, rejectMsg: \"添加失败\"})\r\n          .then((res) => {\r\n            this.close()\r\n          })\r\n        }\r\n      },\r\n      // 获取数据\r\n      async load() {\r\n        let http = new HttpResetClass()\r\n        let data = {\r\n          columnname: 'f_contract_money',\r\n          tablename: 't_contract',\r\n          condition: `processid = '${this.infee.f_process_id}'`\r\n        }\r\n        let res = await  http.load('POST', 'rs/sql/getSum', {data: data}, {resolveMsg: null, rejectMsg: '获取总金额失败'})\r\n        this.model.f_total_cost = res.data[0].f_contract_money\r\n        data = {\r\n          tablename: 't_paydetail',\r\n          condition: `processid = '${this.infee.f_process_id}'`\r\n        }\r\n\r\n        res = await  http.load('POST', 'rs/sql/singleTable', {data: data}, {resolveMsg: null, rejectMsg: '获取付款数据失败'})\r\n        // 去除付款时间的时分秒\r\n        for (var i = 0; i < res.data.length; i++) {\r\n          res.data[i].f_payfeedate = res.data[i].f_payfeedate.substring(0, 11)\r\n        }\r\n        this.model.rows = res.data\r\n      },\r\n      // confirm() {\r\n      //   // this.model.f_change_pipeline_cost = this.model.f_change_pipeline_cost\r\n      //   // this.model.f_material_cost = this.model.f_material_cost\r\n      //   // this.model.f_labor_cost = this.model.f_labor_cost\r\n      //   // this.model.f_sbaz_cost = this.model.f_sbaz_cost\r\n      //   // this.model.f_construction_cost = this.model.f_construction_cost\r\n      //   // this.model.f_total_cost = this.model.f_total_cost\r\n      //\r\n      //   this.model.f_fee = this.model.f_actualfee\r\n      //   this.model.f_actualfee = Number(this.infee.f_actualfee) + Number(this.model.f_actualfee)\r\n      //   this.model.f_paytype = this.model.f_actualfee_type\r\n      //   this.model.f_payfeedate = this.model.f_payfee_date\r\n      //   this.model.f_payer = this.model.f_actualfee_user\r\n      //   this.model.applyid = this.model.id\r\n      //   this.model.f_state = '已交款'\r\n      //   this.model.f_operator = this.model.f_payfee_operator\r\n      //   this.model.f_date = this.model.f_payfee_date\r\n      //   this.model.f_department = this.model.f_payfee_department\r\n      //   // this.model.f_filiale = this.model.f_filiale\r\n      //   this.model.f_operat_type = '报建收费'\r\n      //   this.model.f_state = '有效'\r\n      //   this.model.f_describe = this.model.f_user_name + '缴费' + this.model.f_fee\r\n      //   console.log('输出model', this.model)\r\n      //   let getGen = gen(this, this.model)\r\n      //   co(getGen)\r\n      //   this.$dispatch('searchcard')\r\n      //   this.$dispatch('hiddenbtn')\r\n      // },\r\n      // reset() {\r\n      //   this.$dispatch('hiddenbtn')\r\n      //   // this.$dispatch('hiddenbtn')\r\n      // }\r\n    },\r\n    computed: {\r\n      // 计算大写\r\n      getCapital() {\r\n        if (this.addItem.f_fee) {\r\n          this.addItem.f_capital = this.smalltoBIG(Number(this.addItem.f_fee))\r\n        }\r\n        return this.addItem.f_capital\r\n      },\r\n      subcost() {\r\n        let temp = Number(this.model.f_total_cost)\r\n        let temp2 = 0\r\n        for (var i = 0; i < this.model.rows.length; i++) {\r\n          temp2 += Number(this.model.rows[i].f_fee)\r\n        }\r\n        this.model.f_total_fee =  Math.round(temp2*100)/100\r\n        this.model.subcost = Math.round((temp - temp2)*100)/100\r\n        if(this.model.f_total_fee&&this.model.f_jmhj_cost){\r\n          temp = Math.round((temp - Number(this.model.f_jmhj_cost))*100)/100\r\n        }\r\n        this.model.subcost = Math.round((temp - temp2)*100)/100\r\n        return this.model.subcost\r\n      },\r\n      // totalcost () {\r\n      //   this.model.f_total_cost = Number(this.model.f_construction_cost) + Number(this.model.f_material_cost)\r\n      //      + Number(this.model.f_labor_cost) + Number(this.model.f_change_pipeline_cost)\r\n      //      + Number(this.model.f_sbaz_cost) - Number(this.model.f_jmhj_cost)\r\n      //   return this.model.f_total_cost\r\n      // },\r\n      aaa() {\r\n        this.model.f_jmhj_cost = Number(this.model.f_total_cost) - Number(this.model.f_actualfee)\r\n        return this.model.f_jmhj_cost\r\n      },\r\n      feeoptions() {\r\n        return this.$appdata.getParam('费用类型')\r\n      },\r\n      dayin() {\r\n        return this.$appdata.getParam('打印格式')\r\n      },\r\n      jiaofei() {\r\n        return this.$appdata.getParam('缴费类型')\r\n        // return [{label: '全部', value: ''}, ...AppData.getParam('缴费类型')]\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// InstallFee.vue?78c4c67f","module.exports = \" <div class=\\\"col-sm-12 auto select-overspread\\\"> <div class=\\\"auto select-overspread\\\"> <div class=\\\"panel panel-info\\\"> <div class=\\\"panel-heading auto\\\"> <h3 class=panel-title>报装收费</h3> </div> </div> </div> <div class=col-sm-12> <span class=col-sm-3 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\\\">合同编号:{{infee.f_contract_number}}</span> <span class=col-sm-2 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\\\">合同总金额:{{model.f_total_cost}}元</span> <span class=col-sm-2 v-show=model.f_jmhj_cost>优惠金额:{{model.f_jmhj_cost}}元</span> <span class=col-sm-2 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹'))\\\">累计缴费金额:{{model.f_total_fee}}元</span> <span class=col-sm-2 v-show=\\\"!($login.f.f_fengongsi.includes('彩虹')||$login.f.f_fengongsi.includes('中燃'))\\\">未结:{{subcost}}元</span> <button type=button class=\\\"btn btn-warning col-sm-2\\\" @click=add()>新增收费</button> </div> <div class=col-sm-12 style=\\\"height: auto\\\"> <div class=\\\"form-inline auto\\\" style=\\\"margin-bottom: 5px\\\"> </div> <div class=\\\"col-sm-12 span recordTable\\\" style=\\\"margin-top: 10px;min-height: 500px\\\"> <partial-view v-ref:single-load> <data-grid :model=model v-ref:grid> <template partial=head> <tr> <th>序号</th> <th>金额(元)</th> <th>金额大写</th> <th>缴费类型</th> <th>收费人员</th> <th>日期</th> <th>备注</th> </tr> </template> <template partial=body> <td style=\\\"text-align: center\\\">{{$index+1}}</td> <td style=\\\"text-align: center\\\">{{row.f_fee}}</td> <td style=\\\"text-align: center\\\">{{row.f_capital}}</td> <td style=\\\"text-align: center\\\">{{row.f_payfee_way}}</td> <td style=\\\"text-align: center\\\">{{row.f_operator}}</td> <td style=\\\"text-align: center\\\">{{row.f_payfeedate}}</td> <td style=\\\"text-align: center\\\">{{row.f_payfee_remarks}}</td> </template> </data-grid> </partial-view> </div> </div> <div class=\\\"form-group col-sm-12\\\"> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">分公司：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_filiale disabled=disabled> </div> </div> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">操作日期：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_payfee_date disabled=disabled> </div> </div> </div> <div class=\\\"form-group col-sm-12\\\"> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">部门：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_payfee_department disabled=disabled> </div> </div> <div class=col-sm-6> <label class=\\\"control-label col-sm-4\\\">操作人：</label> <div class=col-sm-8> <input class=form-control type=text v-model=model.f_payfee_operator disabled=disabled> </div> </div> </div> <modal :show.sync=showpay v-ref:modal backdrop=false> <header slot=modal-header class=modal-header> <button type=button class=close @click=close><span>&times;</span></button> <h4 class=modal-title>新增收费</h4> </header> <article slot=modal-body class=modal-body> <div v-if=showpay> <div class=from-group> <label>金额(元)</label> <input type=text class=form-control v-model=addItem.f_fee @blur=check()> </div> <div class=from-group> <label>金额大写</label> <input type=text class=form-control v-model=getCapital readonly=readonly> </div> <div class=from-group> <label>缴费类型</label> <v-select :options=jiaofei v-model=addItem.f_payfee_way :value.sync=addItem.f_payfee_way close-on-select> </v-select> </div> <div class=from-group> <label>交费日期</label> <div> <datepicker width=600.76px; :value.sync=addItem.f_payfeedate :format=\\\"'yyyy-MM-dd'\\\" v-model=addItem.f_payfeedate readonly=readonly :show-reset-button=reset> </datepicker> </div> </div> <div class=from-group> <label>备注</label> <input-select :value.sync=addItem.f_payfee_remarks v-model=addItem.f_payfee_remarks :options=feeoptions @change=change close-on-select></input-select> </div> </div> </article> <footer slot=modal-footer class=modal-footer> <button v-show=showpay type=button class=\\\"btn btn-default\\\" @click=close>取消</button> <button v-show=showpay type=button class=\\\"btn btn-success\\\" @click=confirm>确认</button> </footer> </modal> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/product/Function/functions/InstallFee.vue\n// module id = 744\n// module chunks = 63","var __vue_script__, __vue_template__\nvar __vue_styles__ = {}\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./InstallFee.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../../../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./InstallFee.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\nif (__vue_template__) {\n__vue_options__.template = __vue_template__\n}\nif (!__vue_options__.computed) __vue_options__.computed = {}\nObject.keys(__vue_styles__).forEach(function (key) {\nvar module = __vue_styles__[key]\n__vue_options__.computed[key] = function () { return module }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/product/Function/functions/InstallFee.vue\n// module id = 919\n// module chunks = 63"],"sourceRoot":""}