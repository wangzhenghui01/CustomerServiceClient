{"version":3,"sources":["webpack:///79.js","webpack:///BatchItem.vue","webpack:///./src/components/product/Process/Processes/BatchItem.vue?1144","webpack:///./src/components/product/Process/Processes/BatchItem.vue"],"names":["webpackJsonp","405","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getIterator2","_getIterator3","_stringify","_stringify2","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_vueClient","insert","_ref","mark","_callee","self","param","http3","wrap","_context","prev","next","f_filiale","selectdata","f_apply_num","f_process_id","f_batch_name","addrow","f_unit","f_number","f_price","f_cash","f_type","type","f_state","console","log","HttpResetClass","load","then","search","modifyshow","stop","this","_x","apply","arguments","deletecost","_ref2","_callee2","_context2","id","updaterow","$resetpost","_x2","update","_ref3","_callee3","_context3","updateshow","_x3","title","props","data","batchmodel","PagedList","orderitem","model","number","yusuan","numbergongliao","material","show","iscash","label","ready","methods","importemplate","_ref4","_callee4","materialTemplate","i","http","http2","_this","_context4","$appdata","getSingleValue","length","$set","condition","resolveMsg","rejectMsg","res","modifyConfirm","importbudget","_ref5","_callee5","temp","_this2","_context5","rows","push","getname","_this3","house","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","done","row","f_name","err","return","defname","condition1","getnumber","_this4","condition2","modify","modifyclose","_ref6","_callee6","_context6","$showAlert","abrupt","updateclose","updateConfirm","_ref7","_callee7","_context7","delete","_this5","$showMessage","computed","events","watch","val","$dispatch","addrow.f_batch_name[0]","_this6","updaterow.f_batch_name[0]","_this7","828","1037","__vue_script__","__vue_template__","__vue_styles__","__vue_options__","options","template","keys","forEach","key"],"mappings":"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","file":"79.js","sourcesContent":["webpackJsonp([79],{\n\n/***/ 405:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _getIterator2 = __webpack_require__(13);\n\t\n\tvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\t\n\tvar _stringify = __webpack_require__(5);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _regenerator = __webpack_require__(2);\n\t\n\tvar _regenerator2 = _interopRequireDefault(_regenerator);\n\t\n\tvar _asyncToGenerator2 = __webpack_require__(4);\n\t\n\tvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\t\n\tvar _vueClient = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar insert = function () {\n\t  var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(self) {\n\t    var param, http3;\n\t    return _regenerator2.default.wrap(function _callee$(_context) {\n\t      while (1) {\n\t        switch (_context.prev = _context.next) {\n\t          case 0:\n\t            param = {\n\t              f_filiale: self.selectdata.f_filiale,\n\t              f_apply_num: self.selectdata.f_apply_num,\n\t              f_process_id: self.selectdata.f_process_id,\n\t              f_batch_name: self.addrow.f_batch_name[0],\n\t              f_unit: self.addrow.f_unit,\n\t              f_number: self.addrow.f_number,\n\t              f_price: self.addrow.f_price,\n\t              f_cash: self.addrow.f_number * self.addrow.f_price,\n\t              f_type: self.type,\n\t              f_state: '1'\n\t            };\n\t\n\t            console.log('新增成本项', param);\n\t            http3 = new _vueClient.HttpResetClass();\n\t            _context.next = 5;\n\t            return http3.load('POST', 'rs/entity/t_batch_item', param).then(function () {\n\t              console.log('更新成功！');\n\t              self.addrow.f_batch_name = [];\n\t              self.addrow.f_unit = '';\n\t              self.addrow.f_number = '';\n\t              self.addrow.f_price = '';\n\t              self.search();\n\t            });\n\t\n\t          case 5:\n\t            self.search();\n\t            self.modifyshow = false;\n\t\n\t          case 7:\n\t          case 'end':\n\t            return _context.stop();\n\t        }\n\t      }\n\t    }, _callee, this);\n\t  }));\n\t\n\t  return function insert(_x) {\n\t    return _ref.apply(this, arguments);\n\t  };\n\t}();\n\tvar deletecost = function () {\n\t  var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(self) {\n\t    var param;\n\t    return _regenerator2.default.wrap(function _callee2$(_context2) {\n\t      while (1) {\n\t        switch (_context2.prev = _context2.next) {\n\t          case 0:\n\t            param = {\n\t              id: self.updaterow.id,\n\t              f_state: '0'\n\t            };\n\t\n\t            console.log('移除成本项', param);\n\t            self.$resetpost('rs/entity/t_batch_item', param).then(function () {\n\t              console.log('更新成功！');\n\t              self.search();\n\t            });\n\t            self.search();\n\t            self.modifyshow = false;\n\t\n\t          case 5:\n\t          case 'end':\n\t            return _context2.stop();\n\t        }\n\t      }\n\t    }, _callee2, this);\n\t  }));\n\t\n\t  return function deletecost(_x2) {\n\t    return _ref2.apply(this, arguments);\n\t  };\n\t}();\n\tvar update = function () {\n\t  var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(self) {\n\t    var param;\n\t    return _regenerator2.default.wrap(function _callee3$(_context3) {\n\t      while (1) {\n\t        switch (_context3.prev = _context3.next) {\n\t          case 0:\n\t            param = {\n\t              id: self.updaterow.id,\n\t              f_batch_name: self.updaterow.f_batch_name,\n\t              f_unit: self.updaterow.f_unit,\n\t              f_number: self.updaterow.f_number,\n\t              f_price: self.updaterow.f_price,\n\t              f_cash: self.updaterow.f_number * self.updaterow.f_price\n\t            };\n\t\n\t            console.log('修改成本项', param);\n\t            self.$resetpost('rs/entity/t_batch_item', param).then(function () {\n\t              console.log('更新成功！');\n\t              self.updaterow = null;\n\t              self.search();\n\t            });\n\t            self.search();\n\t            self.updateshow = false;\n\t\n\t          case 5:\n\t          case 'end':\n\t            return _context3.stop();\n\t        }\n\t      }\n\t    }, _callee3, this);\n\t  }));\n\t\n\t  return function update(_x3) {\n\t    return _ref3.apply(this, arguments);\n\t  };\n\t}();\n\texports.default = {\n\t  title: '预算项目',\n\t  props: ['selectdata', 'edit'],\n\t  data: function data() {\n\t    return {\n\t      batchmodel: new _vueClient.PagedList('rs/sql/getBatchItem', 8, { orderitem: '`id`' }),\n\t      model: new _vueClient.PagedList('rs/sql/getBatchItem', 8, { orderitem: '`id`' }),\n\t      number: 0,\n\t      yusuan: 0,\n\t      numbergongliao: 0,\n\t      modifyshow: false,\n\t      updateshow: false,\n\t      updaterow: null,\n\t      addrow: null,\n\t      material: [],\n\t      type: null,\n\t      show: false,\n\t      iscash: [{ label: '是', value: '是' }, { label: '否', value: '否' }]\n\t    };\n\t  },\n\t  ready: function ready() {\n\t    this.search();\n\t  },\n\t\n\t  methods: {\n\t    importemplate: function () {\n\t      var _ref4 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {\n\t        var _this = this;\n\t\n\t        var materialTemplate, i, http, http2;\n\t        return _regenerator2.default.wrap(function _callee4$(_context4) {\n\t          while (1) {\n\t            switch (_context4.prev = _context4.next) {\n\t              case 0:\n\t                materialTemplate = [];\n\t\n\t                if (this.$appdata.getSingleValue(\"材料导入模板\")) {\n\t                  materialTemplate = (0, _stringify2.default)(this.$appdata.getSingleValue(\"材料导入模板\"));\n\t                } else {\n\t                  materialTemplate = [[\"燃气表\"], [\"表接头\"], [\"DN15镀锌管\"], [\"DN15弯头*90\"], [\"DN15外丝直连\"], [\"DN15三通\"], [\"铜球阀\"], [\"单嘴阀\"]];\n\t                }\n\t                i = 0;\n\t\n\t              case 3:\n\t                if (!(i < materialTemplate.length)) {\n\t                  _context4.next = 18;\n\t                  break;\n\t                }\n\t\n\t                this.addrow.f_batch_name = materialTemplate[i];\n\t                this.$set('updaterow.f_batch_name', materialTemplate[i]);\n\t\n\t                this.addrow.f_number = 1;\n\t                http = new _vueClient.HttpResetClass();\n\t                _context4.next = 10;\n\t                return http.load('POST', 'rs/logic/getMaterialItem', { data: { condition: 'f_name = \\'' + this.addrow.f_batch_name[0] + '\\' and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t                  resolveMsg: null,\n\t                  rejectMsg: null\n\t                }).then(function (res) {\n\t                  console.log('查询到的选项', res);\n\t                  _this.addrow.f_price = res.data.material[0].f_price;\n\t                  _this.addrow.f_unit = res.data.material[0].f_unit;\n\t                });\n\t\n\t              case 10:\n\t                http2 = new _vueClient.HttpResetClass();\n\t                _context4.next = 13;\n\t                return http2.load('POST', 'rs/logic/getMaterialItem', { data: { condition: 'f_name = \\'' + this.updaterow.f_batch_name[0] + '\\' and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t                  resolveMsg: null,\n\t                  rejectMsg: null\n\t                }).then(function (res) {\n\t                  console.log('查询到的选项', res);\n\t                  _this.updaterow.f_price = res.data.material[0].f_price;\n\t                  _this.updaterow.f_unit = res.data.material[0].f_unit;\n\t                });\n\t\n\t              case 13:\n\t                _context4.next = 15;\n\t                return this.modifyConfirm();\n\t\n\t              case 15:\n\t                i++;\n\t                _context4.next = 3;\n\t                break;\n\t\n\t              case 18:\n\t                this.search();\n\t\n\t              case 19:\n\t              case 'end':\n\t                return _context4.stop();\n\t            }\n\t          }\n\t        }, _callee4, this);\n\t      }));\n\t\n\t      function importemplate() {\n\t        return _ref4.apply(this, arguments);\n\t      }\n\t\n\t      return importemplate;\n\t    }(),\n\t    importbudget: function () {\n\t      var _ref5 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {\n\t        var _this2 = this;\n\t\n\t        var materialTemplate, i, temp, http, http2;\n\t        return _regenerator2.default.wrap(function _callee5$(_context5) {\n\t          while (1) {\n\t            switch (_context5.prev = _context5.next) {\n\t              case 0:\n\t                materialTemplate = this.batchmodel.rows;\n\t                i = 0;\n\t\n\t              case 2:\n\t                if (!(i < materialTemplate.length)) {\n\t                  _context5.next = 19;\n\t                  break;\n\t                }\n\t\n\t                temp = [];\n\t\n\t                temp.push(materialTemplate[i].f_batch_name);\n\t                this.addrow.f_batch_name = temp;\n\t                this.$set('updaterow.f_batch_name', temp);\n\t\n\t                this.addrow.f_number = materialTemplate[i].f_number;\n\t                http = new _vueClient.HttpResetClass();\n\t                _context5.next = 11;\n\t                return http.load('POST', 'rs/logic/getMaterialItem', { data: { condition: 'f_name = \\'' + this.addrow.f_batch_name[0] + '\\' and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t                  resolveMsg: null,\n\t                  rejectMsg: null\n\t                }).then(function (res) {\n\t                  console.log('查询到的选项', res);\n\t                  _this2.addrow.f_price = res.data.material[0].f_price;\n\t                  _this2.addrow.f_unit = res.data.material[0].f_unit;\n\t                });\n\t\n\t              case 11:\n\t                http2 = new _vueClient.HttpResetClass();\n\t                _context5.next = 14;\n\t                return http2.load('POST', 'rs/logic/getMaterialItem', { data: { condition: 'f_name = \\'' + this.updaterow.f_batch_name[0] + '\\' and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t                  resolveMsg: null,\n\t                  rejectMsg: null\n\t                }).then(function (res) {\n\t                  console.log('查询到的选项', res);\n\t                  _this2.updaterow.f_price = res.data.material[0].f_price;\n\t                  _this2.updaterow.f_unit = res.data.material[0].f_unit;\n\t                });\n\t\n\t              case 14:\n\t                _context5.next = 16;\n\t                return this.modifyConfirm();\n\t\n\t              case 16:\n\t                i++;\n\t                _context5.next = 2;\n\t                break;\n\t\n\t              case 19:\n\t                this.search();\n\t\n\t              case 20:\n\t              case 'end':\n\t                return _context5.stop();\n\t            }\n\t          }\n\t        }, _callee5, this);\n\t      }));\n\t\n\t      function importbudget() {\n\t        return _ref5.apply(this, arguments);\n\t      }\n\t\n\t      return importbudget;\n\t    }(),\n\t    getname: function getname() {\n\t      var _this3 = this;\n\t\n\t      this.$resetpost('rs/logic/getMaterialItem', { data: { condition: '1=1 and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t        resolveMsg: null,\n\t        rejectMsg: null\n\t      }).then(function (res) {\n\t        console.log('查询到的选项', res);\n\t        var house = [];\n\t        var _iteratorNormalCompletion = true;\n\t        var _didIteratorError = false;\n\t        var _iteratorError = undefined;\n\t\n\t        try {\n\t          for (var _iterator = (0, _getIterator3.default)(res.data.material), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var row = _step.value;\n\t\n\t            house.push({ label: row.f_name, value: row.f_name });\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError = true;\n\t          _iteratorError = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\n\t              _iterator.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError) {\n\t              throw _iteratorError;\n\t            }\n\t          }\n\t        }\n\t\n\t        _this3.material = house;\n\t      });\n\t    },\n\t    search: function search() {\n\t      this.show = false;\n\t\n\t      console.log('执行查询');\n\t      if (this.selectdata.defname == '工商预算审核(技术科科长)' || this.selectdata.defname == '工商预算审核(分管副总)' || this.selectdata.defname == '工商预算审核(总经理)' || this.selectdata.defname == '工商现场勘查' || this.selectdata.defname == '民用现场勘查') {\n\t        console.log('预算');\n\t        this.type = '预算';\n\t      }\n\t      if (this.selectdata.defname == '户内安装' || this.selectdata.defname == '安装审核' || this.selectdata.defname == '点火申请' || this.selectdata.defname == '收费材料费' || this.selectdata.defname == '工程验收' || this.selectdata.defname == '点火') {\n\t        console.log('结算');\n\t        this.type = '结算';\n\t      }\n\t      if (this.selectdata.defname == '工商现场勘查' || this.selectdata.defname == '民用现场勘查' || this.selectdata.defname == '户内安装') {\n\t        console.log('显示按钮');\n\t        this.show = true;\n\t      }\n\t\n\t      var condition = ' f_apply_num  = \\'' + this.selectdata.f_apply_num + '\\' and f_type=\\'' + this.type + '\\'';\n\t      var condition1 = ' f_apply_num  = \\'' + this.selectdata.f_apply_num + '\\' and f_type=\\'\\u9884\\u7B97\\'';\n\t      this.model.search(condition);\n\t      this.batchmodel.search(condition1);\n\t      this.getnumber();\n\t    },\n\t    getnumber: function getnumber() {\n\t      var _this4 = this;\n\t\n\t      var http = new _vueClient.HttpResetClass();\n\t      var condition = ' f_apply_num  = \\'' + this.selectdata.f_apply_num + '\\' and f_batch_name like \\'%\\u8D85%\\' and f_type=\\'\\u7ED3\\u7B97\\'';\n\t      http.load('POST', 'rs/sql/getBatchPrice', {\n\t        data: {\n\t          condition: condition,\n\t          orderitem: 'f_price desc'\n\t        }\n\t      }, { resolveMsg: null, rejectMsg: null }).then(function (res) {\n\t        if (res.data[0].f_price) {\n\t          _this4.number = res.data[0].f_price;\n\t        } else {\n\t          _this4.number = 0;\n\t        }\n\t        console.log('11111111111');\n\t      });\n\t\n\t      var condition2 = ' f_apply_num  = \\'' + this.selectdata.f_apply_num + '\\' and f_batch_name like \\'%\\u8D85%\\' and f_type=\\'\\u9884\\u7B97\\'';\n\t      var http2 = new _vueClient.HttpResetClass();\n\t      http2.load('POST', 'rs/sql/getBatchPrice', {\n\t        data: {\n\t          condition: condition2,\n\t          orderitem: 'f_price desc'\n\t        }\n\t      }, { resolveMsg: null, rejectMsg: null }).then(function (res) {\n\t        if (res.data[0].f_price) {\n\t          _this4.yusuan = res.data[0].f_price;\n\t        } else {\n\t          _this4.yusuan = 0;\n\t        }\n\t        console.log('11111111111');\n\t      });\n\t    },\n\t    modify: function modify() {\n\t      this.getname();\n\t      this.modifyshow = true;\n\t    },\n\t    modifyclose: function modifyclose() {\n\t      this.modifyshow = false;\n\t      this.addrow.f_batch_name = [];\n\t      this.addrow.f_unit = '';\n\t      this.addrow.f_number = '';\n\t      this.addrow.f_price = '';\n\t    },\n\t    modifyConfirm: function () {\n\t      var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6() {\n\t        return _regenerator2.default.wrap(function _callee6$(_context6) {\n\t          while (1) {\n\t            switch (_context6.prev = _context6.next) {\n\t              case 0:\n\t                if (this.addrow.f_batch_name) {\n\t                  _context6.next = 3;\n\t                  break;\n\t                }\n\t\n\t                this.$showAlert(\"请输入预算项目\", \"warning\", 1500);\n\t                return _context6.abrupt('return');\n\t\n\t              case 3:\n\t                if (this.addrow.f_number) {\n\t                  _context6.next = 6;\n\t                  break;\n\t                }\n\t\n\t                this.$showAlert(\"请输入数量\", \"warning\", 1500);\n\t                return _context6.abrupt('return');\n\t\n\t              case 6:\n\t                _context6.next = 8;\n\t                return insert(this);\n\t\n\t              case 8:\n\t              case 'end':\n\t                return _context6.stop();\n\t            }\n\t          }\n\t        }, _callee6, this);\n\t      }));\n\t\n\t      function modifyConfirm() {\n\t        return _ref6.apply(this, arguments);\n\t      }\n\t\n\t      return modifyConfirm;\n\t    }(),\n\t    update: function update(row) {\n\t      this.updaterow = row;\n\t      this.updateshow = true;\n\t    },\n\t    updateclose: function updateclose() {\n\t      this.search();\n\t      this.updaterow = null;\n\t      this.updateshow = false;\n\t    },\n\t    updateConfirm: function () {\n\t      var _ref7 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee7() {\n\t        return _regenerator2.default.wrap(function _callee7$(_context7) {\n\t          while (1) {\n\t            switch (_context7.prev = _context7.next) {\n\t              case 0:\n\t                if (this.updaterow.f_batch_name) {\n\t                  _context7.next = 3;\n\t                  break;\n\t                }\n\t\n\t                this.$showAlert(\"请输入预算项目\", \"warning\", 1500);\n\t                return _context7.abrupt('return');\n\t\n\t              case 3:\n\t                if (this.updaterow.f_number) {\n\t                  _context7.next = 6;\n\t                  break;\n\t                }\n\t\n\t                this.$showAlert(\"请输入数量\", \"warning\", 1500);\n\t                return _context7.abrupt('return');\n\t\n\t              case 6:\n\t                _context7.next = 8;\n\t                return update(this);\n\t\n\t              case 8:\n\t              case 'end':\n\t                return _context7.stop();\n\t            }\n\t          }\n\t        }, _callee7, this);\n\t      }));\n\t\n\t      function updateConfirm() {\n\t        return _ref7.apply(this, arguments);\n\t      }\n\t\n\t      return updateConfirm;\n\t    }(),\n\t    delete: function _delete(row) {\n\t      var _this5 = this;\n\t\n\t      this.updaterow = row;\n\t      this.$showMessage('\\u662F\\u5426\\u786E\\u8BA4\\u5220\\u9664\\u6B64\\u9884\\u7B97\\u9879', ['confirm', 'cancel']).then(function (res) {\n\t        if (res === 'confirm') {\n\t          deletecost(_this5);\n\t        }\n\t      });\n\t    }\n\t  },\n\t  computed: {},\n\t  events: {},\n\t  watch: {\n\t    'number': function number(val) {\n\t      this.$dispatch('get-price', val, '结算');\n\t    },\n\t    'yusuan': function yusuan(val) {\n\t      this.$dispatch('get-price', val, '预算');\n\t    },\n\t    'selectdata': function selectdata() {\n\t      this.search();\n\t    },\n\t    'addrow.f_batch_name[0]': function addrowF_batch_name0(val) {\n\t      var _this6 = this;\n\t\n\t      this.$resetpost('rs/logic/getMaterialItem', { data: { condition: 'f_name = \\'' + val + '\\' and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t        resolveMsg: null,\n\t        rejectMsg: null\n\t      }).then(function (res) {\n\t        console.log('查询到的选项', res);\n\t        _this6.addrow.f_price = res.data.material[0].f_price;\n\t        _this6.addrow.f_unit = res.data.material[0].f_unit;\n\t      });\n\t    },\n\t    'updaterow.f_batch_name[0]': function updaterowF_batch_name0(val) {\n\t      var _this7 = this;\n\t\n\t      this.$resetpost('rs/logic/getMaterialItem', { data: { condition: 'f_name = \\'' + val + '\\' and f_use_type=\\'\\u9884\\u7B97/\\u7ED3\\u7B97\\u9879\\u76EE\\'' } }, {\n\t        resolveMsg: null,\n\t        rejectMsg: null\n\t      }).then(function (res) {\n\t        console.log('查询到的选项', res);\n\t        _this7.updaterow.f_price = res.data.material[0].f_price;\n\t        _this7.updaterow.f_unit = res.data.material[0].f_unit;\n\t      });\n\t    }\n\t  }\n\t};\n\n/***/ }),\n\n/***/ 828:\n/***/ (function(module, exports) {\n\n\tmodule.exports = \" <div class=flex style=\\\"height: auto\\\"> <div style=\\\"height: auto\\\" class=flex v-if=\\\"selectdata.defname=='户内安装'||selectdata.defname=='安装审核'||selectdata.defname=='工程验收'\\\"> <p class=\\\"bg-info text-center\\\" style=\\\"padding: 8px;font-size: 20px\\\">预算项目表 </p> <div class=\\\"form-inline auto\\\" style=\\\"margin-bottom: 5px\\\"> <criteria-paged :model=batchmodel :pager=true v-ref:paged1> <data-grid :model=$parent.batchmodel v-ref:grid1 partial=list> <template partial=head> <tr> <th> <nobr>序号</nobr> </th> <th> <nobr>预算项目</nobr> </th> <th> <nobr>单位</nobr> </th> <th> <nobr>数量</nobr> </th> <th> <nobr>单价</nobr> </th> <th> <nobr>金额</nobr> </th> </tr> </template> <template partial=body> <td style=\\\"text-align: center\\\">{{$index + 1}}</td> <td style=\\\"text-align: center\\\">{{row.f_batch_name}}</td> <td style=\\\"text-align: center\\\">{{row.f_unit}}</td> <td style=\\\"text-align: center\\\">{{row.f_number}}</td> <td style=\\\"text-align: center\\\">{{row.f_price}}</td> <td style=\\\"text-align: center\\\">{{row.f_cash}}</td> </template> </data-grid> </criteria-paged> </div> </div> <div style=\\\"height: auto\\\" class=flex> <p class=\\\"bg-info text-center\\\" style=\\\"padding: 8px;font-size: 20px\\\" v-if=\\\"selectdata.defname=='工商预算审核(技术科科长)'||selectdata.defname=='工商预算审核(分管副总)'||selectdata.defname=='工商预算审核(总经理)'||\\n                  selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'\\\">预算项目表 </p> <p class=\\\"bg-info text-center\\\" style=\\\"padding: 8px;font-size: 20px\\\" v-if=\\\"selectdata.defname=='户内安装'||selectdata.defname=='安装审核'||selectdata.defname=='点火申请'||selectdata.defname=='点火'||selectdata.defname=='收费材料费'||selectdata.defname=='工程验收'\\\"> 结算项目表 </p> <div class=\\\"form-inline auto bg-info\\\" v-if=\\\"selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'||selectdata.defname=='户内安装'\\\" style=\\\"float: right\\\"> <div class=form-group style=\\\"float: right\\\" v-if=\\\"selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'\\\"> <button class=\\\"btn btn-success\\\" @click=importemplate()>导入模板</button> </div> <div class=form-group style=\\\"float: right\\\" v-if=\\\"selectdata.defname=='户内安装'\\\"> <button class=\\\"btn btn-success\\\" @click=importbudget()>从预算导入</button> </div> <div class=form-group style=\\\"float: right\\\"> <button class=\\\"btn btn-success\\\" @click=modify()>新增</button> </div> </div> <div class=\\\"form-inline auto\\\" style=\\\"margin-bottom: 5px\\\"> <criteria-paged :model=model :pager=true v-ref:paged> <data-grid :model=model v-ref:grid partial=list> <template partial=head> <tr> <th> <nobr>序号</nobr> </th> <th v-if=\\\"$parent.$parent.$parent.selectdata.defname=='工商预算审核(技术科科长)'||$parent.$parent.$parent.selectdata.defname=='工商预算审核(分管副总)'||$parent.$parent.$parent.selectdata.defname=='工商预算审核(总经理)'||\\n                  $parent.$parent.$parent.selectdata.defname=='工商现场勘查'||$parent.$parent.$parent.selectdata.defname=='民用现场勘查'\\\"> <nobr>预算项目</nobr> </th> <th v-if=\\\"$parent.$parent.$parent.selectdata.defname=='户内安装'||$parent.$parent.$parent.selectdata.defname=='安装审核'||$parent.$parent.$parent.selectdata.defname=='点火申请'||$parent.$parent.$parent.selectdata.defname=='收费材料费'||$parent.$parent.$parent.selectdata.defname=='工程验收'\\\"> <nobr>结算项目</nobr> </th> <th> <nobr>单位</nobr> </th> <th> <nobr>数量</nobr> </th> <th> <nobr>单价</nobr> </th> <th> <nobr>金额</nobr> </th> <th> <nobr>操作</nobr> </th> </tr> </template> <template partial=body> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{$index + 1}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_batch_name}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_unit}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_number}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_price}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_cash}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"> <div v-if=$parent.$parent.$parent.show :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"> <button type=button name=button class=\\\"btn btn-link\\\" @click=$parent.$parent.$parent.update(row)>修正 </button> <button type=button name=button class=\\\"btn btn-link\\\" @click=$parent.$parent.$parent.delete(row)>移除 </button> </div> </td> </template> </data-grid> </criteria-paged> </div> </div> <modal :show.sync=modifyshow backdrop=false> <header slot=modal-header class=modal-header> <h4 class=modal-title>新增项目</h4> </header> <article slot=modal-body class=modal-body> <form class=form-horizontal> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_batch_name class=control-label>项目名</label> <v-select :value.sync=addrow.f_batch_name v-model=updaterow.f_batch_name :options=material placeholder=请选择 style=\\\"width: 50%\\\" close-on-select> </v-select> </div> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_number class=control-label>数量</label> <input type=number class=form-control v-model=addrow.f_number placeholder=数量> </div> </form> </article> <footer slot=modal-footer class=modal-footer> <button type=button class=\\\"btn btn-success\\\" @click=modifyConfirm>确认</button> <button type=button class=\\\"btn btn-default\\\" @click=modifyclose>取消</button> </footer> </modal> <modal :show.sync=updateshow backdrop=false> <header slot=modal-header class=modal-header> <h4 class=modal-title>修改项目名</h4> </header> <article slot=modal-body class=modal-body> <form class=form-horizontal> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_batch_name class=control-label>项目名</label> <input type=text readonly=readonly class=form-control v-model=updaterow.f_batch_name placeholder=预算项目> </div> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_number class=control-label>数量</label> <input type=text class=form-control v-model=updaterow.f_number placeholder=数量> </div> </form> </article> <footer slot=modal-footer class=modal-footer> <button type=button class=\\\"btn btn-success\\\" @click=updateConfirm>确认</button> <button type=button class=\\\"btn btn-default\\\" @click=updateclose>取消</button> </footer> </modal> </div> \";\n\n/***/ }),\n\n/***/ 1037:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\tvar __vue_styles__ = {}\n\t__vue_script__ = __webpack_require__(405)\n\t__vue_template__ = __webpack_require__(828)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\n\tif (__vue_template__) {\n\t__vue_options__.template = __vue_template__\n\t}\n\tif (!__vue_options__.computed) __vue_options__.computed = {}\n\tObject.keys(__vue_styles__).forEach(function (key) {\n\tvar module = __vue_styles__[key]\n\t__vue_options__.computed[key] = function () { return module }\n\t})\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 79.js","<template>\r\n  <div class=\"flex\" style=\"height: auto\">\r\n    <div style=\"height: auto\" class=\"flex\"\r\n         v-if=\"selectdata.defname=='户内安装'||selectdata.defname=='安装审核'||selectdata.defname=='工程验收'\">\r\n\r\n      <p class=\"bg-info text-center\" style=\"padding: 8px;font-size: 20px\">预算项目表\r\n      </p>\r\n      <div class=\"form-inline auto\" style=\"margin-bottom: 5px;\">\r\n        <criteria-paged :model=\"batchmodel\" :pager=\"true\" v-ref:paged1>\r\n          <data-grid :model=\"$parent.batchmodel\" v-ref:grid1 partial='list'>\r\n\r\n            <template partial='head'>\r\n              <tr>\r\n                <th>\r\n                  <nobr>序号</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>预算项目</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>单位</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>数量</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>单价</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>金额</nobr>\r\n                </th>\r\n              </tr>\r\n            </template>\r\n            <template partial='body'>\r\n              <td style=\"text-align: center;\">{{$index + 1}}</td>\r\n              <td style=\"text-align: center;\">{{row.f_batch_name}}</td>\r\n              <td style=\"text-align: center;\">{{row.f_unit}}</td>\r\n              <td style=\"text-align: center;\">{{row.f_number}}</td>\r\n              <td style=\"text-align: center;\">{{row.f_price}}</td>\r\n              <td style=\"text-align: center;\">{{row.f_cash}}</td>\r\n\r\n            </template>\r\n          </data-grid>\r\n        </criteria-paged>\r\n      </div>\r\n    </div>\r\n    <div style=\"height: auto\" class=\"flex\">\r\n      <p class=\"bg-info text-center\" style=\"padding: 8px;font-size: 20px\" v-if=\"selectdata.defname=='工商预算审核(技术科科长)'||selectdata.defname=='工商预算审核(分管副总)'||selectdata.defname=='工商预算审核(总经理)'||\r\n                    selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'\">预算项目表\r\n      </p>\r\n      <p class=\"bg-info text-center\" style=\"padding: 8px;font-size: 20px\"\r\n         v-if=\"selectdata.defname=='户内安装'||selectdata.defname=='安装审核'||selectdata.defname=='点火申请'||selectdata.defname=='点火'||selectdata.defname=='收费材料费'||selectdata.defname=='工程验收'\">\r\n        结算项目表\r\n      </p>\r\n      <div class=\"form-inline auto bg-info\"\r\n           v-if=\"selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'||selectdata.defname=='户内安装'\"\r\n           style=\"float: right\">\r\n        <div class=\"form-group\" style=\"float: right\" v-if=\"selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'\">\r\n          <button class=\"btn btn-success\" @click=\"importemplate()\">导入模板</button>\r\n        </div>\r\n        <div class=\"form-group\" style=\"float: right\"\r\n             v-if=\"selectdata.defname=='户内安装'\">\r\n          <button class=\"btn btn-success\" @click=\"importbudget()\">从预算导入</button>\r\n        </div>\r\n        <div class=\"form-group\" style=\"float: right\">\r\n          <button class=\"btn btn-success\" @click=\"modify()\">新增</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-inline auto\" style=\"margin-bottom: 5px;\">\r\n        <criteria-paged :model=\"model\" :pager=\"true\" v-ref:paged>\r\n          <data-grid :model=\"model\" v-ref:grid partial='list'>\r\n            <template partial='head'>\r\n              <tr>\r\n                <th>\r\n                  <nobr>序号</nobr>\r\n                </th>\r\n                <th v-if=\"$parent.$parent.$parent.selectdata.defname=='工商预算审核(技术科科长)'||$parent.$parent.$parent.selectdata.defname=='工商预算审核(分管副总)'||$parent.$parent.$parent.selectdata.defname=='工商预算审核(总经理)'||\r\n                    $parent.$parent.$parent.selectdata.defname=='工商现场勘查'||$parent.$parent.$parent.selectdata.defname=='民用现场勘查'\">\r\n                  <nobr>预算项目</nobr>\r\n                </th>\r\n                <th\r\n                  v-if=\"$parent.$parent.$parent.selectdata.defname=='户内安装'||$parent.$parent.$parent.selectdata.defname=='安装审核'||$parent.$parent.$parent.selectdata.defname=='点火申请'||$parent.$parent.$parent.selectdata.defname=='收费材料费'||$parent.$parent.$parent.selectdata.defname=='工程验收'\">\r\n                  <nobr>结算项目</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>单位</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>数量</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>单价</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>金额</nobr>\r\n                </th>\r\n                <th>\r\n                  <nobr>操作</nobr>\r\n                </th>\r\n              </tr>\r\n            </template>\r\n            <template partial='body'>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\"><font :style=\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\">{{$index + 1}}</font></td>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\"><font :style=\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\">{{row.f_batch_name}}</font></td>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\"><font :style=\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\">{{row.f_unit}}</font></td>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\"><font :style=\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\">{{row.f_number}}</font></td>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\"><font :style=\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\">{{row.f_price}}</font></td>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\"><font :style=\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\">{{row.f_cash}}</font></td>\r\n              <td :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\">\r\n                <div v-if=\"$parent.$parent.$parent.show\" :style=\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\">\r\n                  <button type=\"button\" name=\"button\" class=\"btn btn-link\"\r\n                          @click=\"$parent.$parent.$parent.update(row)\">修正\r\n                  </button>\r\n                  <button type=\"button\" name=\"button\" class=\"btn btn-link\"\r\n                          @click=\"$parent.$parent.$parent.delete(row)\">移除\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </template>\r\n          </data-grid>\r\n        </criteria-paged>\r\n      </div>\r\n    </div>\r\n    <modal :show.sync=\"modifyshow\" backdrop=\"false\">\r\n      <header slot=\"modal-header\" class=\"modal-header\">\r\n        <h4 class=\"modal-title\">新增项目</h4>\r\n      </header>\r\n      <article slot=\"modal-body\" class=\"modal-body\">\r\n        <form class=\"form-horizontal\">\r\n          <div class=\"col-sm-3 form-group form-input-group\" style=\"width: 100%\">\r\n            <label for=\"f_batch_name\" class=\"control-label\">项目名</label>\r\n            <v-select :value.sync=\"addrow.f_batch_name\" v-model=\"updaterow.f_batch_name\"\r\n                      :options='material' placeholder='请选择' style=\"width: 50%\"\r\n                      close-on-select>\r\n            </v-select>\r\n          </div>\r\n          <div class=\"col-sm-3 form-group form-input-group\" style=\"width: 100%\">\r\n            <label for=\"f_number\" class=\"control-label\">数量</label>\r\n            <input type=\"number\" class=\"form-control\" v-model=\"addrow.f_number\"\r\n                   placeholder='数量'>\r\n          </div>\r\n        </form>\r\n      </article>\r\n      <footer slot=\"modal-footer\" class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-success\" @click='modifyConfirm'>确认</button>\r\n        <button type=\"button\" class=\"btn btn-default\" @click='modifyclose'>取消</button>\r\n      </footer>\r\n    </modal>\r\n    <modal :show.sync=\"updateshow\" backdrop=\"false\">\r\n      <header slot=\"modal-header\" class=\"modal-header\">\r\n        <h4 class=\"modal-title\">修改项目名</h4>\r\n      </header>\r\n      <article slot=\"modal-body\" class=\"modal-body\">\r\n        <form class=\"form-horizontal\">\r\n          <div class=\"col-sm-3 form-group form-input-group\" style=\"width: 100%\">\r\n            <label for=\"f_batch_name\" class=\"control-label\">项目名</label>\r\n            <input type=\"text\" readonly class=\"form-control\" v-model=\"updaterow.f_batch_name\"\r\n                   placeholder='预算项目'>\r\n          </div>\r\n\r\n          <div class=\"col-sm-3 form-group form-input-group\" style=\"width: 100%\">\r\n            <label for=\"f_number\" class=\"control-label\">数量</label>\r\n            <input type=\"text\" class=\"form-control\" v-model=\"updaterow.f_number\"\r\n                   placeholder='数量'>\r\n          </div>\r\n        </form>\r\n      </article>\r\n      <footer slot=\"modal-footer\" class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-success\" @click='updateConfirm'>确认</button>\r\n        <button type=\"button\" class=\"btn btn-default\" @click='updateclose'>取消</button>\r\n      </footer>\r\n    </modal>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {PagedList} from 'vue-client'\r\n  import {HttpResetClass} from 'vue-client'\r\n\r\n  let insert = async function (self) {\r\n    let param = {\r\n      f_filiale: self.selectdata.f_filiale,\r\n      f_apply_num: self.selectdata.f_apply_num,\r\n      f_process_id: self.selectdata.f_process_id,\r\n      f_batch_name: self.addrow.f_batch_name[0],\r\n      f_unit: self.addrow.f_unit,\r\n      f_number: self.addrow.f_number,\r\n      f_price: self.addrow.f_price,\r\n      f_cash: (self.addrow.f_number * self.addrow.f_price),\r\n      f_type: self.type,\r\n      f_state: '1'\r\n    }\r\n    console.log('新增成本项', param)\r\n    let http3 = new HttpResetClass()\r\n    await http3.load('POST', 'rs/entity/t_batch_item', param).then(() => {\r\n      // this.params.rows.splice(index, 1)\r\n      console.log('更新成功！')\r\n      self.addrow.f_batch_name = []\r\n      self.addrow.f_unit = ''\r\n      self.addrow.f_number = ''\r\n      self.addrow.f_price = ''\r\n      self.search()\r\n    })\r\n    self.search()\r\n    self.modifyshow = false\r\n  }\r\n  let deletecost = async function (self) {\r\n    let param = {\r\n      id: self.updaterow.id,\r\n      f_state: '0'\r\n    }\r\n    console.log('移除成本项', param)\r\n    self.$resetpost('rs/entity/t_batch_item', param).then(() => {\r\n      // this.params.rows.splice(index, 1)\r\n      console.log('更新成功！')\r\n      self.search()\r\n    })\r\n    self.search()\r\n    self.modifyshow = false\r\n  }\r\n  let update = async function (self) {\r\n    let param = {\r\n      id: self.updaterow.id,\r\n      f_batch_name: self.updaterow.f_batch_name,\r\n      f_unit: self.updaterow.f_unit,\r\n      f_number: self.updaterow.f_number,\r\n      f_price: self.updaterow.f_price,\r\n      f_cash: (self.updaterow.f_number * self.updaterow.f_price),\r\n    }\r\n    console.log('修改成本项', param)\r\n    self.$resetpost('rs/entity/t_batch_item', param).then(() => {\r\n      // this.params.rows.splice(index, 1)\r\n      console.log('更新成功！')\r\n      self.updaterow = null\r\n      self.search()\r\n    })\r\n    self.search()\r\n    self.updateshow = false\r\n  }\r\n  export default {\r\n    title: '预算项目',\r\n    props: ['selectdata', 'edit'],\r\n    data() {\r\n      return {\r\n        batchmodel: new PagedList('rs/sql/getBatchItem', 8, {orderitem: '`id`'}),\r\n        model: new PagedList('rs/sql/getBatchItem', 8, {orderitem: '`id`'}),\r\n        number: 0,\r\n        yusuan: 0,\r\n        numbergongliao: 0,\r\n        modifyshow: false,\r\n        updateshow: false,\r\n        updaterow: null,\r\n        addrow: null,\r\n        material: [],\r\n        type: null,\r\n        show: false,\r\n        iscash: [\r\n          {label: '是', value: '是'},\r\n          {label: '否', value: '否'}\r\n        ],\r\n      }\r\n    },\r\n    ready() {\r\n      this.search()\r\n    },\r\n    methods: {\r\n      async importemplate() { // 材料导入\r\n        // :value.sync=\"addrow.f_batch_name\" v-model=\"updaterow.f_batch_name\"   v-model=\"addrow.f_number\"\r\n        let materialTemplate = []\r\n        if(this.$appdata.getSingleValue(\"材料导入模板\")){\r\n          materialTemplate = JSON.stringify(this.$appdata.getSingleValue(\"材料导入模板\"))\r\n        }else{\r\n          materialTemplate = [[\"燃气表\"], [\"表接头\"], [\"DN15镀锌管\"], [\"DN15弯头*90\"], [\"DN15外丝直连\"], [\"DN15三通\"], [\"铜球阀\"], [\"单嘴阀\"]]\r\n        }\r\n        for (let i = 0; i < materialTemplate.length; i++) {\r\n          this.addrow.f_batch_name = materialTemplate[i]\r\n          this.$set('updaterow.f_batch_name', materialTemplate[i])\r\n          // this.updaterow.f_batch_name =materialTemplate[i]\r\n          this.addrow.f_number = 1\r\n          //  获取价格\r\n          let http = new HttpResetClass()\r\n          await http.load('POST', 'rs/logic/getMaterialItem', {data: {condition: `f_name = '${this.addrow.f_batch_name[0]}' and f_use_type='预算/结算项目'`}}, {\r\n            resolveMsg: null,\r\n            rejectMsg: null\r\n          }).then((res) => {\r\n            console.log('查询到的选项', res)\r\n            this.addrow.f_price = res.data.material[0].f_price\r\n            this.addrow.f_unit = res.data.material[0].f_unit\r\n          })\r\n          let http2 = new HttpResetClass()\r\n          await http2.load('POST', 'rs/logic/getMaterialItem', {data: {condition: `f_name = '${this.updaterow.f_batch_name[0]}' and f_use_type='预算/结算项目'`}}, {\r\n            resolveMsg: null,\r\n            rejectMsg: null\r\n          }).then((res) => {\r\n            console.log('查询到的选项', res)\r\n            this.updaterow.f_price = res.data.material[0].f_price\r\n            this.updaterow.f_unit = res.data.material[0].f_unit\r\n          })\r\n          await this.modifyConfirm()\r\n        }\r\n        this.search()\r\n      },\r\n      async importbudget() {\r\n        let materialTemplate = this.batchmodel.rows\r\n        for (let i = 0; i < materialTemplate.length; i++) {\r\n          let temp = []\r\n          temp.push(materialTemplate[i].f_batch_name)\r\n          this.addrow.f_batch_name = temp\r\n          this.$set('updaterow.f_batch_name', temp)\r\n          // this.updaterow.f_batch_name =materialTemplate[i]\r\n          this.addrow.f_number = materialTemplate[i].f_number\r\n          //  获取价格\r\n          let http = new HttpResetClass()\r\n          await http.load('POST', 'rs/logic/getMaterialItem', {data: {condition: `f_name = '${this.addrow.f_batch_name[0]}' and f_use_type='预算/结算项目'`}}, {\r\n            resolveMsg: null,\r\n            rejectMsg: null\r\n          }).then((res) => {\r\n            console.log('查询到的选项', res)\r\n            this.addrow.f_price = res.data.material[0].f_price\r\n            this.addrow.f_unit = res.data.material[0].f_unit\r\n          })\r\n          let http2 = new HttpResetClass()\r\n          await http2.load('POST', 'rs/logic/getMaterialItem', {data: {condition: `f_name = '${this.updaterow.f_batch_name[0]}' and f_use_type='预算/结算项目'`}}, {\r\n            resolveMsg: null,\r\n            rejectMsg: null\r\n          }).then((res) => {\r\n            console.log('查询到的选项', res)\r\n            this.updaterow.f_price = res.data.material[0].f_price\r\n            this.updaterow.f_unit = res.data.material[0].f_unit\r\n          })\r\n          await this.modifyConfirm()\r\n        }\r\n        this.search()\r\n      },\r\n      getname() {\r\n        this.$resetpost('rs/logic/getMaterialItem', {data: {condition: `1=1 and f_use_type='预算/结算项目'`}}, {\r\n          resolveMsg: null,\r\n          rejectMsg: null\r\n        }).then((res) => {\r\n          console.log('查询到的选项', res)\r\n          let house = []\r\n          for (let row of res.data.material) {\r\n            house.push({label: row.f_name, value: row.f_name})\r\n          }\r\n          this.material = house\r\n        })\r\n      },\r\n      search() {\r\n        this.show = false\r\n\r\n        console.log('执行查询')\r\n        if (this.selectdata.defname == '工商预算审核(技术科科长)' || this.selectdata.defname == '工商预算审核(分管副总)' || this.selectdata.defname == '工商预算审核(总经理)' ||\r\n          this.selectdata.defname == '工商现场勘查' || this.selectdata.defname == '民用现场勘查') {\r\n          console.log('预算')\r\n          this.type = '预算'\r\n        }\r\n        if (this.selectdata.defname == '户内安装' || this.selectdata.defname == '安装审核' || this.selectdata.defname == '点火申请' || this.selectdata.defname == '收费材料费' || this.selectdata.defname == '工程验收'||this.selectdata.defname == '点火') {\r\n          console.log('结算')\r\n          this.type = '结算'\r\n        }\r\n        if (this.selectdata.defname == '工商现场勘查' || this.selectdata.defname == '民用现场勘查' || this.selectdata.defname == '户内安装') {\r\n          console.log('显示按钮')\r\n          this.show = true\r\n        }\r\n\r\n        let condition = ` f_apply_num  = '${this.selectdata.f_apply_num}' and f_type='${this.type}'`\r\n        let condition1 = ` f_apply_num  = '${this.selectdata.f_apply_num}' and f_type='预算'`\r\n        this.model.search(condition)\r\n        this.batchmodel.search(condition1)\r\n        this.getnumber()\r\n      },\r\n\r\n      getnumber() {\r\n        // 结算\r\n        let http = new HttpResetClass()\r\n        let condition = ` f_apply_num  = '${this.selectdata.f_apply_num}' and f_batch_name like '%超%' and f_type='结算'`\r\n        http.load('POST', 'rs/sql/getBatchPrice', {\r\n          data: {\r\n            condition: condition,\r\n            orderitem: `f_price desc`\r\n          }\r\n        }, {resolveMsg: null, rejectMsg: null}).then((res) => {\r\n          if (res.data[0].f_price) {\r\n            this.number = res.data[0].f_price\r\n          } else {\r\n            this.number = 0\r\n          }\r\n          console.log('11111111111')\r\n        })\r\n        // 预算yusuan\r\n        let condition2 = ` f_apply_num  = '${this.selectdata.f_apply_num}' and f_batch_name like '%超%' and f_type='预算'`\r\n        let http2 = new HttpResetClass()\r\n        http2.load('POST', 'rs/sql/getBatchPrice', {\r\n          data: {\r\n            condition: condition2,\r\n            orderitem: `f_price desc`\r\n          }\r\n        }, {resolveMsg: null, rejectMsg: null}).then((res) => {\r\n          if (res.data[0].f_price) {\r\n            this.yusuan = res.data[0].f_price\r\n          } else {\r\n            this.yusuan = 0\r\n          }\r\n          console.log('11111111111')\r\n        })\r\n      },\r\n      modify() {\r\n        this.getname()\r\n        this.modifyshow = true\r\n      },\r\n      modifyclose() {\r\n        this.modifyshow = false\r\n        this.addrow.f_batch_name = []\r\n        this.addrow.f_unit = ''\r\n        this.addrow.f_number = ''\r\n        this.addrow.f_price = ''\r\n      },\r\n      async modifyConfirm() {\r\n        if (!this.addrow.f_batch_name) {\r\n          this.$showAlert(\"请输入预算项目\", \"warning\", 1500)\r\n          return\r\n        }\r\n        if (!this.addrow.f_number) {\r\n          this.$showAlert(\"请输入数量\", \"warning\", 1500)\r\n          return\r\n        }\r\n        await insert(this)\r\n      },\r\n      update(row) {\r\n        this.updaterow = row\r\n        this.updateshow = true\r\n      },\r\n      updateclose() {\r\n        this.search()\r\n        this.updaterow = null\r\n        this.updateshow = false\r\n      },\r\n      async updateConfirm() {\r\n        if (!this.updaterow.f_batch_name) {\r\n          this.$showAlert(\"请输入预算项目\", \"warning\", 1500)\r\n          return\r\n        }\r\n        if (!this.updaterow.f_number) {\r\n          this.$showAlert(\"请输入数量\", \"warning\", 1500)\r\n          return\r\n        }\r\n       await update(this)\r\n        // await this.$showMessage(`是否确认修改此预算项`, ['confirm', 'cancel']).then((res) => {\r\n        //   if (res === 'confirm') {\r\n        //\r\n        //   }\r\n        // })\r\n      },\r\n      delete(row) {\r\n        this.updaterow = row\r\n        this.$showMessage(`是否确认删除此预算项`, ['confirm', 'cancel']).then((res) => {\r\n          if (res === 'confirm') {\r\n            deletecost(this)\r\n          }\r\n        })\r\n      }\r\n\r\n    },\r\n    computed: {},\r\n    events: {},\r\n    watch: {\r\n      'number'(val) {\r\n        this.$dispatch('get-price', val, '结算')\r\n      },\r\n      'yusuan'(val) {\r\n        this.$dispatch('get-price', val, '预算')\r\n      },\r\n      'selectdata'() {\r\n        this.search()\r\n      },\r\n      'addrow.f_batch_name[0]'(val) {\r\n        this.$resetpost('rs/logic/getMaterialItem', {data: {condition: `f_name = '${val}' and f_use_type='预算/结算项目'`}}, {\r\n          resolveMsg: null,\r\n          rejectMsg: null\r\n        }).then((res) => {\r\n          console.log('查询到的选项', res)\r\n          this.addrow.f_price = res.data.material[0].f_price\r\n          this.addrow.f_unit = res.data.material[0].f_unit\r\n        })\r\n      },\r\n      'updaterow.f_batch_name[0]'(val) {\r\n        this.$resetpost('rs/logic/getMaterialItem', {data: {condition: `f_name = '${val}' and f_use_type='预算/结算项目'`}}, {\r\n          resolveMsg: null,\r\n          rejectMsg: null\r\n        }).then((res) => {\r\n          console.log('查询到的选项', res)\r\n          this.updaterow.f_price = res.data.material[0].f_price\r\n          this.updaterow.f_unit = res.data.material[0].f_unit\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// BatchItem.vue?041d1f28","module.exports = \" <div class=flex style=\\\"height: auto\\\"> <div style=\\\"height: auto\\\" class=flex v-if=\\\"selectdata.defname=='户内安装'||selectdata.defname=='安装审核'||selectdata.defname=='工程验收'\\\"> <p class=\\\"bg-info text-center\\\" style=\\\"padding: 8px;font-size: 20px\\\">预算项目表 </p> <div class=\\\"form-inline auto\\\" style=\\\"margin-bottom: 5px\\\"> <criteria-paged :model=batchmodel :pager=true v-ref:paged1> <data-grid :model=$parent.batchmodel v-ref:grid1 partial=list> <template partial=head> <tr> <th> <nobr>序号</nobr> </th> <th> <nobr>预算项目</nobr> </th> <th> <nobr>单位</nobr> </th> <th> <nobr>数量</nobr> </th> <th> <nobr>单价</nobr> </th> <th> <nobr>金额</nobr> </th> </tr> </template> <template partial=body> <td style=\\\"text-align: center\\\">{{$index + 1}}</td> <td style=\\\"text-align: center\\\">{{row.f_batch_name}}</td> <td style=\\\"text-align: center\\\">{{row.f_unit}}</td> <td style=\\\"text-align: center\\\">{{row.f_number}}</td> <td style=\\\"text-align: center\\\">{{row.f_price}}</td> <td style=\\\"text-align: center\\\">{{row.f_cash}}</td> </template> </data-grid> </criteria-paged> </div> </div> <div style=\\\"height: auto\\\" class=flex> <p class=\\\"bg-info text-center\\\" style=\\\"padding: 8px;font-size: 20px\\\" v-if=\\\"selectdata.defname=='工商预算审核(技术科科长)'||selectdata.defname=='工商预算审核(分管副总)'||selectdata.defname=='工商预算审核(总经理)'||\\n                  selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'\\\">预算项目表 </p> <p class=\\\"bg-info text-center\\\" style=\\\"padding: 8px;font-size: 20px\\\" v-if=\\\"selectdata.defname=='户内安装'||selectdata.defname=='安装审核'||selectdata.defname=='点火申请'||selectdata.defname=='点火'||selectdata.defname=='收费材料费'||selectdata.defname=='工程验收'\\\"> 结算项目表 </p> <div class=\\\"form-inline auto bg-info\\\" v-if=\\\"selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'||selectdata.defname=='户内安装'\\\" style=\\\"float: right\\\"> <div class=form-group style=\\\"float: right\\\" v-if=\\\"selectdata.defname=='工商现场勘查'||selectdata.defname=='民用现场勘查'\\\"> <button class=\\\"btn btn-success\\\" @click=importemplate()>导入模板</button> </div> <div class=form-group style=\\\"float: right\\\" v-if=\\\"selectdata.defname=='户内安装'\\\"> <button class=\\\"btn btn-success\\\" @click=importbudget()>从预算导入</button> </div> <div class=form-group style=\\\"float: right\\\"> <button class=\\\"btn btn-success\\\" @click=modify()>新增</button> </div> </div> <div class=\\\"form-inline auto\\\" style=\\\"margin-bottom: 5px\\\"> <criteria-paged :model=model :pager=true v-ref:paged> <data-grid :model=model v-ref:grid partial=list> <template partial=head> <tr> <th> <nobr>序号</nobr> </th> <th v-if=\\\"$parent.$parent.$parent.selectdata.defname=='工商预算审核(技术科科长)'||$parent.$parent.$parent.selectdata.defname=='工商预算审核(分管副总)'||$parent.$parent.$parent.selectdata.defname=='工商预算审核(总经理)'||\\n                  $parent.$parent.$parent.selectdata.defname=='工商现场勘查'||$parent.$parent.$parent.selectdata.defname=='民用现场勘查'\\\"> <nobr>预算项目</nobr> </th> <th v-if=\\\"$parent.$parent.$parent.selectdata.defname=='户内安装'||$parent.$parent.$parent.selectdata.defname=='安装审核'||$parent.$parent.$parent.selectdata.defname=='点火申请'||$parent.$parent.$parent.selectdata.defname=='收费材料费'||$parent.$parent.$parent.selectdata.defname=='工程验收'\\\"> <nobr>结算项目</nobr> </th> <th> <nobr>单位</nobr> </th> <th> <nobr>数量</nobr> </th> <th> <nobr>单价</nobr> </th> <th> <nobr>金额</nobr> </th> <th> <nobr>操作</nobr> </th> </tr> </template> <template partial=body> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{$index + 1}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_batch_name}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_unit}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_number}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_price}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"><font :style=\\\"row.f_batch_name.includes('超')?'font-weight:bold;color: blue':''\\\">{{row.f_cash}}</font></td> <td :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"> <div v-if=$parent.$parent.$parent.show :style=\\\"row.f_batch_name.includes('超')?'background-color: yellow;text-align: center;':'text-align: center;'\\\"> <button type=button name=button class=\\\"btn btn-link\\\" @click=$parent.$parent.$parent.update(row)>修正 </button> <button type=button name=button class=\\\"btn btn-link\\\" @click=$parent.$parent.$parent.delete(row)>移除 </button> </div> </td> </template> </data-grid> </criteria-paged> </div> </div> <modal :show.sync=modifyshow backdrop=false> <header slot=modal-header class=modal-header> <h4 class=modal-title>新增项目</h4> </header> <article slot=modal-body class=modal-body> <form class=form-horizontal> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_batch_name class=control-label>项目名</label> <v-select :value.sync=addrow.f_batch_name v-model=updaterow.f_batch_name :options=material placeholder=请选择 style=\\\"width: 50%\\\" close-on-select> </v-select> </div> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_number class=control-label>数量</label> <input type=number class=form-control v-model=addrow.f_number placeholder=数量> </div> </form> </article> <footer slot=modal-footer class=modal-footer> <button type=button class=\\\"btn btn-success\\\" @click=modifyConfirm>确认</button> <button type=button class=\\\"btn btn-default\\\" @click=modifyclose>取消</button> </footer> </modal> <modal :show.sync=updateshow backdrop=false> <header slot=modal-header class=modal-header> <h4 class=modal-title>修改项目名</h4> </header> <article slot=modal-body class=modal-body> <form class=form-horizontal> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_batch_name class=control-label>项目名</label> <input type=text readonly=readonly class=form-control v-model=updaterow.f_batch_name placeholder=预算项目> </div> <div class=\\\"col-sm-3 form-group form-input-group\\\" style=\\\"width: 100%\\\"> <label for=f_number class=control-label>数量</label> <input type=text class=form-control v-model=updaterow.f_number placeholder=数量> </div> </form> </article> <footer slot=modal-footer class=modal-footer> <button type=button class=\\\"btn btn-success\\\" @click=updateConfirm>确认</button> <button type=button class=\\\"btn btn-default\\\" @click=updateclose>取消</button> </footer> </modal> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/product/Process/Processes/BatchItem.vue\n// module id = 828\n// module chunks = 79","var __vue_script__, __vue_template__\nvar __vue_styles__ = {}\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!../../../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./BatchItem.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../../../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./BatchItem.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue_options__ = typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports\nif (__vue_template__) {\n__vue_options__.template = __vue_template__\n}\nif (!__vue_options__.computed) __vue_options__.computed = {}\nObject.keys(__vue_styles__).forEach(function (key) {\nvar module = __vue_styles__[key]\n__vue_options__.computed[key] = function () { return module }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/product/Process/Processes/BatchItem.vue\n// module id = 1037\n// module chunks = 79"],"sourceRoot":""}