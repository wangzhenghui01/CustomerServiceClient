webpackJsonp([30],{365:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=t(2),s=a(o),l=t(7),r=a(l),c=t(3);n.default={title:"追加合同",props:["addcontract"],data:function(){return{contract_datas:[],show:!1,addItem:null}},ready:function(){this.load()},methods:{smalltoBIG:function(e){var n=["角","分"],t=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],a=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"";e=Math.abs(e);for(var s="",l=0;l<n.length;l++)s+=(t[Math.floor(10*e*Math.pow(10,l))%10]+n[l]).replace(/零./,"");s=s||"整",e=Math.floor(e);for(var l=0;l<a[0].length&&e>0;l++){for(var r="",c=0;c<a[1].length&&e>0;c++)r=t[e%10]+a[1][c]+r,e=Math.floor(e/10);s=r.replace(/(零.)*零$/,"").replace(/^$/,"零")+a[0][l]+s}return o+s.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},load:function(){function e(){return n.apply(this,arguments)}var n=(0,r.default)(s.default.mark(function e(){var n,t,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new c.HttpResetClass,t={tablename:"t_contract",condition:"processid = '"+this.addcontract.f_process_id+"'"},e.next=4,n.load("POST","rs/sql/singleTable",{data:t},{resolveMsg:null,rejectMsg:"获取合同表失败"});case 4:a=e.sent,this.contract_datas=[],a.data.forEach(function(e,n){e.f_contract_nature.includes('"')&&(e.f_contract_nature=e.f_contract_nature.split('"')[1]),e.f_pay_type.includes('"')&&(e.f_pay_type=e.f_pay_type.split('"')[1])}),this.contract_datas=a.data;case 8:case"end":return e.stop()}},e,this)}));return e}(),add:function(){this.contract_datas?this.$showMessage("请先在主流程中签订合同"):this.show=!0},confirm:function(){function e(){return n.apply(this,arguments)}var n=(0,r.default)(s.default.mark(function e(){var n,t=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.addItem.f_contract_money){e.next=13;break}return n=new c.HttpResetClass,this.addItem.f_contract_nature=this.addcontract.f_contract_nature,this.addItem.f_contract_number=this.addcontract.f_contract_number,this.addItem.processid=this.addcontract.f_process_id,this.addItem.f_contract_type="补充协议",this.addItem.applyid=this.addcontract.f_apply_num,this.addItem.f_operator=this.$login.f.name,this.addItem.f_department=this.$login.f.f_parentname,this.addItem.f_filiale=this.$login.f.f_fengongsi,this.contract_datas.push(this.addItem),e.next=13,n.load("POST","rs/logic/saveentity",{data:{tablename:"t_contract",parameters:this.addItem}},{resolveMsg:null,rejectMsg:"添加失败"}).then(function(e){t.close()});case 13:this.$showMessage("请输入金额");case 14:case"end":return e.stop()}},e,this)}));return e}(),close:function(){this.show=!1,this.addItem=null}},computed:{getCapital:function(){return this.addItem.f_contract_money&&(this.addItem.f_capital=this.smalltoBIG(Number(this.addItem.f_contract_money))),this.addItem.f_capital},sum:function(){for(var e=0,n=0;n<this.contract_datas.length;n++)e+=Number(this.contract_datas[n].f_contract_money);return e},jiaofei:function(){return this.$appdata.getParam("缴费类型")}}}},514:function(e,n,t){n=e.exports=t(4)(),n.push([e.id,"textarea[_v-6e09eef4]{width:74.5%}","",{version:3,sources:["/./src/components/product/Function/functions/AddContract.vue"],names:[],mappings:"AA4PA,sBACE,WAAa,CACd",file:"AddContract.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntextarea[_v-6e09eef4] {\n  width: 74.5%;\n}\n"],sourceRoot:"webpack://"}])},601:function(e,n,t){var a=t(514);"string"==typeof a&&(a=[[e.id,a,""]]);t(5)(a,{});a.locals&&(e.exports=a.locals)},797:function(e,n){e.exports=' <div class=col-sm-12 style="height: auto" _v-6e09eef4=""> <div class="auto select-overspread" _v-6e09eef4=""> <div class="panel panel-info" _v-6e09eef4=""> <div class="panel-heading auto" _v-6e09eef4=""> <h3 class=panel-title _v-6e09eef4="">补充协议</h3> </div> </div> </div> <div class=col-sm-12 style="height: auto" _v-6e09eef4=""> <span class=col-sm-1 _v-6e09eef4=""></span> <span class=col-sm-3 _v-6e09eef4="">总个数:{{contract_datas.length}}</span> <span class=col-sm-2 _v-6e09eef4=""></span> <span class=col-sm-3 v-if="!$login.f.f_fengongsi.includes(\'彩虹\')" _v-6e09eef4="">总金额:{{sum}}元</span> <button class="col-sm-offset-2 btn btn-warning" type=button @click=add() _v-6e09eef4="">补充协议</button> </div> <div class=col-sm-12 style="height: auto;border:1px solid #000;padding-top: 10px" v-for="row in contract_datas" _v-6e09eef4=""> <div class=col-sm-12 _v-6e09eef4=""> <div class="form-group col-sm-3 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">合同编号：</label> <div class=col-sm-6 _v-6e09eef4=""> <input class=form-control type=text v-model=row.f_contract_number readonly="" _v-6e09eef4=""> </div> </div> <div class="form-group col-sm-3 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">类型(合同/协议)：</label> <div class=col-sm-6 _v-6e09eef4=""> <input class=form-control type=text v-model=row.f_contract_type readonly="" _v-6e09eef4=""> </div> </div> <div class="form-group col-sm-3 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">签订日期：</label> <div class=col-sm-6 _v-6e09eef4=""> <input class=form-control type=text v-model=row.f_contract_time readonly="" _v-6e09eef4=""> </div> </div> </div> <div class=col-sm-12 _v-6e09eef4=""> <div class="form-group col-sm-3 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">合同金额(元):</label> <div class=col-sm-6 _v-6e09eef4=""> <input class=form-control type=text v-model=row.f_contract_money readonly="" _v-6e09eef4=""> </div> </div> <div class="form-group col-sm-3 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">金额大写：</label> <div class=col-sm-6 _v-6e09eef4=""> <input class=form-control type=text v-model=row.f_capital readonly="" _v-6e09eef4=""> </div> </div> <div class="form-group col-sm-3 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">合同性质：</label> <div class=col-sm-6 _v-6e09eef4=""> <input class=form-control type=text v-model=row.f_contract_nature readonly="" _v-6e09eef4=""> </div> </div> </div> <div class="form-group col-sm-12 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">缴费类型：</label> <div class=col-sm-5 _v-6e09eef4=""> <textarea class=form-control v-model=row.f_pay_type rows=3 readonly="" _v-6e09eef4=""></textarea> </div> </div> <div class="form-group col-sm-12 form-input-group" _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">备注：</label> <div class=col-sm-5 _v-6e09eef4=""> <textarea class=form-control v-model=row.t_remarks rows=2 readonly="" _v-6e09eef4=""></textarea> </div> </div> </div> <modal :show.sync=show v-ref:modal="" backdrop=false _v-6e09eef4=""> <header slot=modal-header class=modal-header _v-6e09eef4=""> <button type=button class=close @click=close _v-6e09eef4=""><span _v-6e09eef4="">×</span></button> <h4 class=modal-title _v-6e09eef4="">新增合同</h4> </header> <article slot=modal-body class=modal-body _v-6e09eef4=""> <div class=from-group _v-6e09eef4=""> <label _v-6e09eef4="">合同编号</label> <input type=text class=form-control v-model=addcontract.f_contract_number readonly="" _v-6e09eef4=""> </div> <div class=from-group _v-6e09eef4=""> <label _v-6e09eef4="">签订日期</label> <div _v-6e09eef4=""> <datepicker width=600.76px; :value.sync=addItem.f_contract_time :format="\'yyyy-MM-dd\'" v-model=addItem.f_contract_time readonly=readonly :show-reset-button=reset _v-6e09eef4=""> </datepicker> </div> </div> <div class=from-group _v-6e09eef4=""> <label _v-6e09eef4="">合同金额(元)</label> <input type=text class=form-control v-model=addItem.f_contract_money _v-6e09eef4=""> </div> <div class=form-group _v-6e09eef4=""> <label class=control-label _v-6e09eef4="">金额大写：</label> <input class=form-control type=text v-model=getCapital readonly="" _v-6e09eef4=""> </div> <div class=from-group _v-6e09eef4=""> <label _v-6e09eef4="">缴费类型</label> <v-select :options=jiaofei v-model=addItem.f_pay_type :value.sync=addItem.f_pay_type close-on-select="" _v-6e09eef4=""> </v-select> </div> <div class=from-group _v-6e09eef4=""> <label _v-6e09eef4="">备注</label> <textarea class=form-control v-model=addItem.t_remarks rows=3 _v-6e09eef4=""></textarea> </div> </article> <footer slot=modal-footer class=modal-footer _v-6e09eef4=""> <button v-show=show type=button class="btn btn-default" @click=close _v-6e09eef4="">取消</button> <button v-show=show type=button class="btn btn-success" @click=confirm _v-6e09eef4="">确认</button> </footer> </modal> </div> '},916:function(e,n,t){var a,o,s={};t(601),a=t(365),o=t(797),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports.default);var l="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;o&&(l.template=o),l.computed||(l.computed={}),Object.keys(s).forEach(function(e){var n=s[e];l.computed[e]=function(){return n}})}});
//# sourceMappingURL=30.js.map